"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4498],{7423:(Zr,kn,L)=>{L.d(kn,{Uw:()=>rn,fo:()=>i});var R=L(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var bt=(()=>{return(x=bt||(bt={})).Unimplemented="UNIMPLEMENTED",x.Unavailable="UNAVAILABLE",bt;var x})();class en extends Error{constructor(p,b,T){super(p),this.message=p,this.code=b,this.data=T}}const le=x=>{var p,b,T,B,S;const D=x.CapacitorCustomPlatform||null,j=x.Capacitor||{},J=j.Plugins=j.Plugins||{},U=x.CapacitorPlatforms,Mt=(null===(p=null==U?void 0:U.currentPlatform)||void 0===p?void 0:p.getPlatform)||(()=>null!==D?D.name:(x=>{var p,b;return null!=x&&x.androidBridge?"android":null!==(b=null===(p=null==x?void 0:x.webkit)||void 0===p?void 0:p.messageHandlers)&&void 0!==b&&b.bridge?"ios":"web"})(x)),pe=(null===(b=null==U?void 0:U.currentPlatform)||void 0===b?void 0:b.isNativePlatform)||(()=>"web"!==Mt()),jn=(null===(T=null==U?void 0:U.currentPlatform)||void 0===T?void 0:T.isPluginAvailable)||(Q=>{const W=rt.get(Q);return!!(null!=W&&W.platforms.has(Mt())||sn(Q))}),sn=(null===(B=null==U?void 0:U.currentPlatform)||void 0===B?void 0:B.getPluginHeader)||(Q=>{var W;return null===(W=j.PluginHeaders)||void 0===W?void 0:W.find(kt=>kt.name===Q)}),rt=new Map,fe=(null===(S=null==U?void 0:U.currentPlatform)||void 0===S?void 0:S.registerPlugin)||((Q,W={})=>{const kt=rt.get(Q);if(kt)return console.warn(`Capacitor plugin "${Q}" already registered. Cannot register plugins twice.`),kt.proxy;const X=Mt(),dt=sn(Q);let ct;const me=function(){var F=(0,R.Z)(function*(){return!ct&&X in W?ct=ct="function"==typeof W[X]?yield W[X]():W[X]:null!==D&&!ct&&"web"in W&&(ct=ct="function"==typeof W.web?yield W.web():W.web),ct});return function(){return F.apply(this,arguments)}}(),Zt=F=>{let V;const lt=(...mt)=>{const tt=me().then(ot=>{const yt=((F,V)=>{var lt,mt;if(!dt){if(F)return null===(mt=F[V])||void 0===mt?void 0:mt.bind(F);throw new en(`"${Q}" plugin is not implemented on ${X}`,bt.Unimplemented)}{const tt=null==dt?void 0:dt.methods.find(ot=>V===ot.name);if(tt)return"promise"===tt.rtype?ot=>j.nativePromise(Q,V.toString(),ot):(ot,yt)=>j.nativeCallback(Q,V.toString(),ot,yt);if(F)return null===(lt=F[V])||void 0===lt?void 0:lt.bind(F)}})(ot,F);if(yt){const Tt=yt(...mt);return V=null==Tt?void 0:Tt.remove,Tt}throw new en(`"${Q}.${F}()" is not implemented on ${X}`,bt.Unimplemented)});return"addListener"===F&&(tt.remove=(0,R.Z)(function*(){return V()})),tt};return lt.toString=()=>`${F.toString()}() { [capacitor code] }`,Object.defineProperty(lt,"name",{value:F,writable:!1,configurable:!1}),lt},Zn=Zt("addListener"),vt=Zt("removeListener"),ft=(F,V)=>{const lt=Zn({eventName:F},V),mt=function(){var ot=(0,R.Z)(function*(){const yt=yield lt;vt({eventName:F,callbackId:yt},V)});return function(){return ot.apply(this,arguments)}}(),tt=new Promise(ot=>lt.then(()=>ot({remove:mt})));return tt.remove=(0,R.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield mt()}),tt},Dt=new Proxy({},{get(F,V){switch(V){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return dt?ft:Zn;case"removeListener":return vt;default:return Zt(V)}}});return J[Q]=Dt,rt.set(Q,{name:Q,proxy:Dt,platforms:new Set([...Object.keys(W),...dt?[X]:[]])}),Dt});return j.convertFileSrc||(j.convertFileSrc=Q=>Q),j.getPlatform=Mt,j.handleError=Q=>x.console.error(Q),j.isNativePlatform=pe,j.isPluginAvailable=jn,j.pluginMethodNoop=(Q,W,kt)=>Promise.reject(`${kt} does not have an implementation of "${W}".`),j.registerPlugin=fe,j.Exception=en,j.DEBUG=!!j.DEBUG,j.isLoggingEnabled=!!j.isLoggingEnabled,j.platform=j.getPlatform(),j.isNative=j.isNativePlatform(),j},jt=(x=>x.Capacitor=le(x))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),i=jt.registerPlugin;class rn{constructor(p){this.listeners={},this.windowListeners={},p&&(console.warn(`Capacitor WebPlugin "${p.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=p)}addListener(p,b){var T=this;this.listeners[p]||(this.listeners[p]=[]),this.listeners[p].push(b);const S=this.windowListeners[p];S&&!S.registered&&this.addWindowListener(S);const D=function(){var J=(0,R.Z)(function*(){return T.removeListener(p,b)});return function(){return J.apply(this,arguments)}}(),j=Promise.resolve({remove:D});return Object.defineProperty(j,"remove",{value:(J=(0,R.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield D()}),function(){return J.apply(this,arguments)})}),j;var J}removeAllListeners(){var p=this;return(0,R.Z)(function*(){p.listeners={};for(const b in p.windowListeners)p.removeWindowListener(p.windowListeners[b]);p.windowListeners={}})()}notifyListeners(p,b){const T=this.listeners[p];T&&T.forEach(B=>B(b))}hasListeners(p){return!!this.listeners[p].length}registerWindowListener(p,b){this.windowListeners[b]={registered:!1,windowEventName:p,pluginEventName:b,handler:T=>{this.notifyListeners(b,T)}}}unimplemented(p="not implemented"){return new jt.Exception(p,bt.Unimplemented)}unavailable(p="not available"){return new jt.Exception(p,bt.Unavailable)}removeListener(p,b){var T=this;return(0,R.Z)(function*(){const B=T.listeners[p];if(!B)return;const S=B.indexOf(b);T.listeners[p].splice(S,1),T.listeners[p].length||T.removeWindowListener(T.windowListeners[p])})()}addWindowListener(p){window.addEventListener(p.windowEventName,p.handler),p.registered=!0}removeWindowListener(p){p&&(window.removeEventListener(p.windowEventName,p.handler),p.registered=!1)}}const An=x=>encodeURIComponent(x).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),on=x=>x.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class he extends rn{getCookies(){return(0,R.Z)(function*(){const p=document.cookie,b={};return p.split(";").forEach(T=>{if(T.length<=0)return;let[B,S]=T.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");B=on(B).trim(),S=on(S).trim(),b[B]=S}),b})()}setCookie(p){return(0,R.Z)(function*(){try{const b=An(p.key),T=An(p.value),B=`; expires=${(p.expires||"").replace("expires=","")}`,S=(p.path||"/").replace("path=",""),D=null!=p.url&&p.url.length>0?`domain=${p.url}`:"";document.cookie=`${b}=${T||""}${B}; path=${S}; ${D};`}catch(b){return Promise.reject(b)}})()}deleteCookie(p){return(0,R.Z)(function*(){try{document.cookie=`${p.key}=; Max-Age=0`}catch(b){return Promise.reject(b)}})()}clearCookies(){return(0,R.Z)(function*(){try{const p=document.cookie.split(";")||[];for(const b of p)document.cookie=b.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(p){return Promise.reject(p)}})()}clearAllCookies(){var p=this;return(0,R.Z)(function*(){try{yield p.clearCookies()}catch(b){return Promise.reject(b)}})()}}i("CapacitorCookies",{web:()=>new he});const tr=function(){var x=(0,R.Z)(function*(p){return new Promise((b,T)=>{const B=new FileReader;B.onload=()=>{const S=B.result;b(S.indexOf(",")>=0?S.split(",")[1]:S)},B.onerror=S=>T(S),B.readAsDataURL(p)})});return function(b){return x.apply(this,arguments)}}();class Sn extends rn{request(p){return(0,R.Z)(function*(){const b=((x,p={})=>{const b=Object.assign({method:x.method||"GET",headers:x.headers},p),B=((x={})=>{const p=Object.keys(x);return Object.keys(x).map(B=>B.toLocaleLowerCase()).reduce((B,S,D)=>(B[S]=x[p[D]],B),{})})(x.headers)["content-type"]||"";if("string"==typeof x.data)b.body=x.data;else if(B.includes("application/x-www-form-urlencoded")){const S=new URLSearchParams;for(const[D,j]of Object.entries(x.data||{}))S.set(D,j);b.body=S.toString()}else if(B.includes("multipart/form-data")){const S=new FormData;if(x.data instanceof FormData)x.data.forEach((j,J)=>{S.append(J,j)});else for(const j of Object.keys(x.data))S.append(j,x.data[j]);b.body=S;const D=new Headers(b.headers);D.delete("content-type"),b.headers=D}else(B.includes("application/json")||"object"==typeof x.data)&&(b.body=JSON.stringify(x.data));return b})(p,p.webFetchExtra),T=((x,p=!0)=>x?Object.entries(x).reduce((T,B)=>{const[S,D]=B;let j,J;return Array.isArray(D)?(J="",D.forEach(U=>{j=p?encodeURIComponent(U):U,J+=`${S}=${j}&`}),J.slice(0,-1)):(j=p?encodeURIComponent(D):D,J=`${S}=${j}`),`${T}&${J}`},"").substr(1):null)(p.params,p.shouldEncodeUrlParams),B=T?`${p.url}?${T}`:p.url,S=yield fetch(B,b),D=S.headers.get("content-type")||"";let J,U,{responseType:j="text"}=S.ok?p:{};switch(D.includes("application/json")&&(j="json"),j){case"arraybuffer":case"blob":U=yield S.blob(),J=yield tr(U);break;case"json":J=yield S.json();break;default:J=yield S.text()}const gt={};return S.headers.forEach((Mt,Kt)=>{gt[Kt]=Mt}),{data:J,headers:gt,status:S.status,url:S.url}})()}get(p){var b=this;return(0,R.Z)(function*(){return b.request(Object.assign(Object.assign({},p),{method:"GET"}))})()}post(p){var b=this;return(0,R.Z)(function*(){return b.request(Object.assign(Object.assign({},p),{method:"POST"}))})()}put(p){var b=this;return(0,R.Z)(function*(){return b.request(Object.assign(Object.assign({},p),{method:"PUT"}))})()}patch(p){var b=this;return(0,R.Z)(function*(){return b.request(Object.assign(Object.assign({},p),{method:"PATCH"}))})()}delete(p){var b=this;return(0,R.Z)(function*(){return b.request(Object.assign(Object.assign({},p),{method:"DELETE"}))})()}}i("CapacitorHttp",{web:()=>new Sn})},4498:(Zr,kn,L)=>{L.r(kn),L.d(kn,{ProductPageModule:()=>ei});var R=L(6895),se=L(433),z=L(4556),Qt=L(3841),ht=L(655),Tn=L(1135),ce=L(9751),bt=L(3900),en=L(5026),En=L(8505),le=L(4004),ue=L(262),jt=L(9646),i=L(8256),In=L(529),de=L(2340),rn=L(2843);let Xe=(()=>{class n{constructor(e){this.http=e}get(e,r,o=!1){const a=new In.WM({Authorization:""});return this.http.get(de.LB+e,{headers:a,params:r}).pipe((0,ue.K)(s=>(0,rn._)(s)))}}return n.\u0275fac=function(e){return new(e||n)(i.LFG(In.eN))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),An=(()=>{class n extends Xe{getProduct(e){return this.get("products",e,!1)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=i.n5z(n)))(r||n)}}(),n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),on=(()=>{class n{transform(e,r="Rp ",o="symbol",a="1.0-0",s="id"){return(0,R.xG)(e,s,(0,R.jK)(r,"narrow"),r,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=i.Yjl({name:"rupiah",type:n,pure:!0}),n})();var he=L(7423),an=(()=>{return(n=an||(an={})).Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE",an;var n})();const ge=(0,he.fo)("Filesystem",{web:()=>L.e(6364).then(L.bind(L,6364)).then(n=>new n.FilesystemWeb)});class Sn{constructor(t,e,r,o,a,s){this.url=t,this.data=e,this.mimeType=r,this.tag=o,this.width=a,this.height=s}}const x=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,p=Object.keys,b=Array.isArray;function T(n,t){return"object"!=typeof t||p(t).forEach(function(e){n[e]=t[e]}),n}typeof Promise>"u"||x.Promise||(x.Promise=Promise);const B=Object.getPrototypeOf,S={}.hasOwnProperty;function D(n,t){return S.call(n,t)}function j(n,t){"function"==typeof t&&(t=t(B(n))),(typeof Reflect>"u"?p:Reflect.ownKeys)(t).forEach(e=>{U(n,e,t[e])})}const J=Object.defineProperty;function U(n,t,e,r){J(n,t,T(e&&D(e,"get")&&"function"==typeof e.get?{get:e.get,set:e.set,configurable:!0}:{value:e,configurable:!0,writable:!0},r))}function gt(n){return{from:function(t){return n.prototype=Object.create(t.prototype),U(n.prototype,"constructor",n),{extend:j.bind(null,n.prototype)}}}}const Mt=Object.getOwnPropertyDescriptor;function Kt(n,t){let e;return Mt(n,t)||(e=B(n))&&Kt(e,t)}const pe=[].slice;function Yt(n,t,e){return pe.call(n,t,e)}function jn(n,t){return t(n)}function Bt(n){if(!n)throw new Error("Assertion Failed")}function sn(n){x.setImmediate?setImmediate(n):setTimeout(n,0)}function Kn(n,t){return n.reduce((e,r,o)=>{var a=t(r,o);return a&&(e[a[0]]=a[1]),e},{})}function pt(n,t){if(D(n,t))return n[t];if(!t)return n;if("string"!=typeof t){for(var e=[],r=0,o=t.length;r<o;++r){var a=pt(n,t[r]);e.push(a)}return e}var s=t.indexOf(".");if(-1!==s){var l=n[t.substr(0,s)];return void 0===l?void 0:pt(l,t.substr(s+1))}}function rt(n,t,e){if(n&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if("string"!=typeof t&&"length"in t){Bt("string"!=typeof e&&"length"in e);for(var r=0,o=t.length;r<o;++r)rt(n,t[r],e[r])}else{var a=t.indexOf(".");if(-1!==a){var s=t.substr(0,a),l=t.substr(a+1);if(""===l)void 0===e?b(n)&&!isNaN(parseInt(s))?n.splice(s,1):delete n[s]:n[s]=e;else{var c=n[s];c&&D(n,s)||(c=n[s]={}),rt(c,l,e)}}else void 0===e?b(n)&&!isNaN(parseInt(t))?n.splice(t,1):delete n[t]:n[t]=e}}function Bn(n){var t={};for(var e in n)D(n,e)&&(t[e]=n[e]);return t}const fe=[].concat;function Q(n){return fe.apply([],n)}const W="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Q([8,16,32,64].map(n=>["Int","Uint","Float"].map(t=>t+n+"Array")))).filter(n=>x[n]),kt=W.map(n=>x[n]);Kn(W,n=>[n,!0]);let X=null;function dt(n){X=typeof WeakMap<"u"&&new WeakMap;const t=ct(n);return X=null,t}function ct(n){if(!n||"object"!=typeof n)return n;let t=X&&X.get(n);if(t)return t;if(b(n)){t=[],X&&X.set(n,t);for(var e=0,r=n.length;e<r;++e)t.push(ct(n[e]))}else if(kt.indexOf(n.constructor)>=0)t=n;else{const a=B(n);for(var o in t=a===Object.prototype?{}:Object.create(a),X&&X.set(n,t),n)D(n,o)&&(t[o]=ct(n[o]))}return t}const{toString:me}={};function cn(n){return me.call(n).slice(8,-1)}const Zt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Zn="symbol"==typeof Zt?function(n){var t;return null!=n&&(t=n[Zt])&&t.apply(n)}:function(){return null},vt={};function ft(n){var t,e,r,o;if(1===arguments.length){if(b(n))return n.slice();if(this===vt&&"string"==typeof n)return[n];if(o=Zn(n)){for(e=[];!(r=o.next()).done;)e.push(r.value);return e}if(null==n)return[n];if("number"==typeof(t=n.length)){for(e=new Array(t);t--;)e[t]=n[t];return e}return[n]}for(t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return e}const Dt=typeof Symbol<"u"?n=>"AsyncFunction"===n[Symbol.toStringTag]:()=>!1;var F=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function V(n,t){F=n,lt=t}var lt=()=>!0;const mt=!new Error("").stack;function tt(){if(mt)try{throw new Error}catch(n){return n}return new Error}function ot(n,t){var e=n.stack;return e?(t=t||0,0===e.indexOf(n.name)&&(t+=(n.name+n.message).split("\n").length),e.split("\n").slice(t).filter(lt).map(r=>"\n"+r).join("")):""}var yt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Tt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(yt),Rr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Wt(n,t){this._e=tt(),this.name=n,this.message=t}function rr(n,t){return n+". Errors: "+Object.keys(t).map(e=>t[e].toString()).filter((e,r,o)=>o.indexOf(e)===r).join("\n")}function Dn(n,t,e,r){this._e=tt(),this.failures=t,this.failedKeys=r,this.successCount=e,this.message=rr(n,t)}function ln(n,t){this._e=tt(),this.name="BulkError",this.failures=Object.keys(t).map(e=>t[e]),this.failuresByPos=t,this.message=rr(n,t)}gt(Wt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ot(this._e,2))}},toString:function(){return this.name+": "+this.message}}),gt(Dn).from(Wt),gt(ln).from(Wt);var ye=Tt.reduce((n,t)=>(n[t]=t+"Error",n),{});const Ur=Wt;var K=Tt.reduce((n,t)=>{var e=t+"Error";function r(o,a){this._e=tt(),this.name=e,o?"string"==typeof o?(this.message=`${o}${a?"\n "+a:""}`,this.inner=a||null):"object"==typeof o&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=Rr[t]||e,this.inner=null)}return gt(r).from(Ur),n[t]=r,n},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var or=yt.reduce((n,t)=>(n[t+"Error"]=K[t],n),{}),Rn=Tt.reduce((n,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(n[t+"Error"]=K[t]),n),{});function N(){}function un(n){return n}function Fr(n,t){return null==n||n===un?t:function(e){return t(n(e))}}function Rt(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function Lr(n,t){return n===N?t:function(){var e=n.apply(this,arguments);void 0!==e&&(arguments[0]=e);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Rt(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Rt(o,this.onerror):o),void 0!==a?a:e}}function Nr(n,t){return n===N?t:function(){n.apply(this,arguments);var e=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?Rt(e,this.onsuccess):e),r&&(this.onerror=this.onerror?Rt(r,this.onerror):r)}}function qr(n,t){return n===N?t:function(e){var r=n.apply(this,arguments);T(e,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Rt(o,this.onsuccess):o),a&&(this.onerror=this.onerror?Rt(a,this.onerror):a),void 0===r?void 0===s?void 0:s:T(r,s)}}function zr(n,t){return n===N?t:function(){return!1!==t.apply(this,arguments)&&n.apply(this,arguments)}}function _e(n,t){return n===N?t:function(){var e=n.apply(this,arguments);if(e&&"function"==typeof e.then){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return e.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}Rn.ModifyError=Dn,Rn.DexieError=Wt,Rn.BulkError=ln;var dn={};const[be,Un,ve]=typeof Promise>"u"?[]:(()=>{let n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,B(n),n];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,B(t),n]})(),ir=Un&&Un.then,Fn=be&&be.constructor,Pe=!!ve;var xe=!1,$r=ve?()=>{ve.then(zn)}:x.setImmediate?setImmediate.bind(null,zn):x.MutationObserver?()=>{var n=document.createElement("div");new MutationObserver(()=>{zn(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:()=>{setTimeout(zn,0)},hn=function(n,t){gn.push([n,t]),Ln&&($r(),Ln=!1)},Ce=!0,Ln=!0,Ut=[],Nn=[],we=null,Oe=un,Gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(n=>{try{pr(n[0],n[1])}catch(t){}})}},A=Gt,gn=[],Ft=0,qn=[];function M(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var t=this._PSD=A;if(F&&(this._stackHolder=tt(),this._prev=null,this._numPrev=0),"function"!=typeof n){if(n!==dn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&ke(this,this._value))}this._state=null,this._value=null,++t.ref,sr(this,n)}const Me={get:function(){var n=A,t=Yn;function e(r,o){var a=!n.global&&(n!==A||t!==Yn);const s=a&&!Pt();var l=new M((c,g)=>{Te(this,new ar(Gn(r,n,a,s),Gn(o,n,a,s),c,g,n))});return F&&ur(l,this),l}return e.prototype=dn,e},set:function(n){U(this,"then",n&&n.prototype===dn?Me:{get:function(){return n},set:Me.set})}};function ar(n,t,e,r,o){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r,this.psd=o}function sr(n,t){try{t(e=>{if(null===n._state){if(e===n)throw new TypeError("A promise cannot be resolved with itself.");var r=n._lib&&pn();e&&"function"==typeof e.then?sr(n,(o,a)=>{e instanceof M?e._then(o,a):e.then(o,a)}):(n._state=!0,n._value=e,cr(n)),r&&fn()}},ke.bind(null,n))}catch(e){ke(n,e)}}function ke(n,t){if(Nn.push(t),null===n._state){var e=n._lib&&pn();t=Oe(t),n._state=!1,n._value=t,F&&null!==t&&"object"==typeof t&&!t._promise&&function(r,o,a){try{(()=>{var r=Kt(t,"stack");t._promise=n,U(t,"stack",{get:()=>xe?r&&(r.get?r.get.apply(t):r.value):n.stack})}).apply(null,void 0)}catch(s){}}(),r=n,Ut.some(o=>o._value===r._value)||Ut.push(r),cr(n),e&&fn()}var r}function cr(n){var t=n._listeners;n._listeners=[];for(var e=0,r=t.length;e<r;++e)Te(n,t[e]);var o=n._PSD;--o.ref||o.finalize(),0===Ft&&(++Ft,hn(()=>{0==--Ft&&Ee()},[]))}function Te(n,t){if(null!==n._state){var e=n._state?t.onFulfilled:t.onRejected;if(null===e)return(n._state?t.resolve:t.reject)(n._value);++t.psd.ref,++Ft,hn(Qr,[e,n,t])}else n._listeners.push(t)}function Qr(n,t,e){try{we=t;var r,o=t._value;t._state?r=n(o):(Nn.length&&(Nn=[]),r=n(o),-1===Nn.indexOf(o)&&function(a){for(var s=Ut.length;s;)if(Ut[--s]._value===a._value)return void Ut.splice(s,1)}(t)),e.resolve(r)}catch(a){e.reject(a)}finally{we=null,0==--Ft&&Ee(),--e.psd.ref||e.psd.finalize()}}function lr(n,t,e){if(t.length===e)return t;var r="";if(!1===n._state){var o,a,s=n._value;null!=s?(o=s.name||"Error",a=s.message||s,r=ot(s,0)):(o=s,a=""),t.push(o+(a?": "+a:"")+r)}return F&&((r=ot(n._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),n._prev&&lr(n._prev,t,e)),t}function ur(n,t){var e=t?t._numPrev+1:0;e<100&&(n._prev=t,n._numPrev=e)}function zn(){pn()&&fn()}function pn(){var n=Ce;return Ce=!1,Ln=!1,n}function fn(){var n,t,e;do{for(;gn.length>0;)for(n=gn,gn=[],e=n.length,t=0;t<e;++t){var r=n[t];r[0].apply(null,r[1])}}while(gn.length>0);Ce=!0,Ln=!0}function Ee(){var n=Ut;Ut=[],n.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=qn.slice(0),e=t.length;e;)t[--e]()}function $n(n){return new M(dn,!1,n)}function $(n,t){var e=A;return function(){var r=pn(),o=A;try{return It(e,!0),n.apply(this,arguments)}catch(a){t&&t(a)}finally{It(o,!1),r&&fn()}}}j(M.prototype,{then:Me,_then:function(n,t){Te(this,new ar(null,null,n,t,A))},catch:function(n){if(1===arguments.length)return this.then(null,n);var t=arguments[0],e=arguments[1];return this.then(null,"function"==typeof t?r=>r instanceof t?e(r):$n(r):r=>r&&r.name===t?e(r):$n(r))},finally:function(n){return this.then(t=>(n(),t),t=>(n(),$n(t)))},stack:{get:function(){if(this._stack)return this._stack;try{xe=!0;var n=lr(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{xe=!1}}},timeout:function(n,t){return n<1/0?new M((e,r)=>{var o=setTimeout(()=>r(new K.Timeout(t)),n);this.then(e,r).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&U(M.prototype,Symbol.toStringTag,"Dexie.Promise"),Gt.env=dr(),j(M,{all:function(){var n=ft.apply(null,arguments).map(Wn);return new M(function(t,e){0===n.length&&t([]);var r=n.length;n.forEach((o,a)=>M.resolve(o).then(s=>{n[a]=s,--r||t(n)},e))})},resolve:n=>{if(n instanceof M)return n;if(n&&"function"==typeof n.then)return new M((e,r)=>{n.then(e,r)});var t=new M(dn,!0,n);return ur(t,we),t},reject:$n,race:function(){var n=ft.apply(null,arguments).map(Wn);return new M((t,e)=>{n.map(r=>M.resolve(r).then(t,e))})},PSD:{get:()=>A,set:n=>A=n},totalEchoes:{get:()=>Yn},newPSD:Et,usePSD:Ht,scheduler:{get:()=>hn,set:n=>{hn=n}},rejectionMapper:{get:()=>Oe,set:n=>{Oe=n}},follow:(n,t)=>new M((e,r)=>Et((o,a)=>{var s=A;s.unhandleds=[],s.onunhandled=a,s.finalize=Rt(function(){var l;l=()=>{0===this.unhandleds.length?o():a(this.unhandleds[0])},qn.push(function c(){l(),qn.splice(qn.indexOf(c),1)}),++Ft,hn(()=>{0==--Ft&&Ee()},[])},s.finalize),n()},t,e,r))}),Fn&&(Fn.allSettled&&U(M,"allSettled",function(){const n=ft.apply(null,arguments).map(Wn);return new M(t=>{0===n.length&&t([]);let e=n.length;const r=new Array(e);n.forEach((o,a)=>M.resolve(o).then(s=>r[a]={status:"fulfilled",value:s},s=>r[a]={status:"rejected",reason:s}).then(()=>--e||t(r)))})}),Fn.any&&typeof AggregateError<"u"&&U(M,"any",function(){const n=ft.apply(null,arguments).map(Wn);return new M((t,e)=>{0===n.length&&e(new AggregateError([]));let r=n.length;const o=new Array(r);n.forEach((a,s)=>M.resolve(a).then(l=>t(l),l=>{o[s]=l,--r||e(new AggregateError(o))}))})}));const nt={awaits:0,echoes:0,id:0};var Yr=0,Qn=[],Ie=0,Yn=0,Wr=0;function Et(n,t,e,r){var o=A,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++Wr;var s=Gt.env;a.env=Pe?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject,nthen:gr(s.nthen,a),gthen:gr(s.gthen,a)}:{},t&&T(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Ht(a,n,e,r);return 0===a.ref&&a.finalize(),l}function Jt(){return nt.id||(nt.id=++Yr),++nt.awaits,nt.echoes+=100,nt.id}function Pt(){return!!nt.awaits&&(0==--nt.awaits&&(nt.id=0),nt.echoes=100*nt.awaits,!0)}function Wn(n){return nt.echoes&&n&&n.constructor===Fn?(Jt(),n.then(t=>(Pt(),t),t=>(Pt(),H(t)))):n}function Gr(n){++Yn,nt.echoes&&0!=--nt.echoes||(nt.echoes=nt.id=0),Qn.push(A),It(n,!0)}function Jr(){var n=Qn[Qn.length-1];Qn.pop(),It(n,!1)}function It(n,t){var e=A;if((t?!nt.echoes||Ie++&&n===A:!Ie||--Ie&&n===A)||hr(t?Gr.bind(null,n):Jr),n!==A&&(A=n,e===Gt&&(Gt.env=dr()),Pe)){var r=Gt.env.Promise,o=n.env;Un.then=o.nthen,r.prototype.then=o.gthen,(e.global||n.global)&&(Object.defineProperty(x,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function dr(){var n=x.Promise;return Pe?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(x,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:Un.then,gthen:n.prototype.then}:{}}function Ht(n,t,e,r,o){var a=A;try{return It(n,!0),t(e,r,o)}finally{It(a,!1)}}function hr(n){ir.call(be,n)}function Gn(n,t,e,r){return"function"!=typeof n?n:function(){var o=A;e&&Jt(),It(t,!0);try{return n.apply(this,arguments)}finally{It(o,!1),r&&hr(Pt)}}}function gr(n,t){return function(e,r){return n.call(this,Gn(e,t),Gn(r,t))}}function pr(n,t){var e;try{e=t.onuncatched(n)}catch(a){}if(!1!==e)try{var r,o={promise:t,reason:n};if(x.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),T(r,o)):x.CustomEvent&&T(r=new CustomEvent("unhandledrejection",{detail:o}),o),r&&x.dispatchEvent&&(dispatchEvent(r),!x.PromiseRejectionEvent&&x.onunhandledrejection))try{x.onunhandledrejection(r)}catch(a){}F&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${n.stack||n}`)}catch(a){}}-1===(""+ir).indexOf("[native code]")&&(Jt=Pt=N);var H=M.reject;function Ae(n,t,e,r){if(n.idbdb&&(n._state.openComplete||A.letThrough||n._vip)){var o=n._createTransaction(t,e,n._dbSchema);try{o.create(),n._state.PR1398_maxLoop=3}catch(a){return a.name===ye.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>Ae(n,t,e,r))):H(a)}return o._promise(t,(a,s)=>Et(()=>(A.trans=o,r(a,s,o)))).then(a=>o._completion.then(()=>a))}if(n._state.openComplete)return H(new K.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return H(new K.DatabaseClosed);n.open().catch(N)}return n._state.dbReadyPromise.then(()=>Ae(n,t,e,r))}const Lt=String.fromCharCode(65535),xt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mn=[],Jn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Hr=Jn,Vr=Jn,fr=n=>!/(dexie\.js|dexie\.min\.js)/.test(n);function Nt(n,t){return n?t?function(){return n.apply(this,arguments)&&t.apply(this,arguments)}:n:t}const mr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Hn(n){return"string"!=typeof n||/\./.test(n)?t=>t:t=>(void 0===t[n]&&n in t&&delete(t=dt(t))[n],t)}class Xr{_trans(t,e,r){const o=this._tx||A.trans,a=this.name;function s(c,g,d){if(!d.schema[a])throw new K.NotFound("Table "+a+" not part of transaction");return e(d.idbtrans,d)}const l=pn();try{return o&&o.db===this.db?o===A.trans?o._promise(t,s,r):Et(()=>o._promise(t,s,r),{trans:o,transless:A.transless||A}):Ae(this.db,t,[this.name],s)}finally{l&&fn()}}get(t,e){return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(o=>this.hook.reading.fire(o))).then(e)}where(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(b(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const e=p(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(g=>g.compound&&e.every(d=>g.keyPath.indexOf(d)>=0)&&g.keyPath.every(d=>e.indexOf(d)>=0))[0];if(r&&this.db._maxKey!==Lt)return this.where(r.name).equals(r.keyPath.map(g=>t[g]));!r&&F&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${e.join("+")}]`);const{idxByName:o}=this.schema,a=this.db._deps.indexedDB;function s(g,d){try{return 0===a.cmp(g,d)}catch(h){return!1}}const[l,c]=e.reduce(([g,d],h)=>{const u=o[h],f=t[h];return[g||u,g||!u?Nt(d,u&&u.multi?v=>{const _=pt(v,h);return b(_)&&_.some(P=>s(f,P))}:v=>s(f,pt(v,h))):d]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(e).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,b(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const e=r=>{if(!r)return r;const o=Object.create(t.prototype);for(var a in r)if(D(r,a))try{o[a]=r[a]}catch(s){}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t}defineClass(){return this.mapToClass(function(t){T(this,t)})}add(t,e){const{auto:r,keyPath:o}=this.schema.primKey;let a=t;return o&&r&&(a=Hn(o)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:null!=e?[e]:null,values:[a]})).then(s=>s.numFailures?M.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{rt(t,o,s)}catch(l){}return s})}update(t,e){if("object"!=typeof t||b(t))return this.where(":id").equals(t).modify(e);{const r=pt(t,this.schema.primKey.keyPath);if(void 0===r)return H(new K.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof e?p(e).forEach(o=>{rt(t,o,e[o])}):e(t,{value:t,primKey:r})}catch(o){}return this.where(":id").equals(r).modify(e)}}put(t,e){const{auto:r,keyPath:o}=this.schema.primKey;let a=t;return o&&r&&(a=Hn(o)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[a],keys:null!=e?[e]:null})).then(s=>s.numFailures?M.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{rt(t,o,s)}catch(l){}return s})}delete(t){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"delete",keys:[t]})).then(e=>e.numFailures?M.reject(e.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:mr})).then(t=>t.numFailures?M.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",e=>this.core.getMany({keys:t,trans:e}).then(r=>r.map(o=>this.hook.reading.fire(o))))}bulkAdd(t,e,r){const o=Array.isArray(e)?e:void 0,a=(r=r||(o?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&o)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");const g=t.length;let d=c&&l?t.map(Hn(c)):t;return this.core.mutate({trans:s,type:"add",keys:o,values:d,wantResults:a}).then(({numFailures:h,results:u,lastResult:f,failures:v})=>{if(0===h)return a?u:f;throw new ln(`${this.name}.bulkAdd(): ${h} of ${g} operations failed`,v)})})}bulkPut(t,e,r){const o=Array.isArray(e)?e:void 0,a=(r=r||(o?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&o)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");const g=t.length;let d=c&&l?t.map(Hn(c)):t;return this.core.mutate({trans:s,type:"put",keys:o,values:d,wantResults:a}).then(({numFailures:h,results:u,lastResult:f,failures:v})=>{if(0===h)return a?u:f;throw new ln(`${this.name}.bulkPut(): ${h} of ${g} operations failed`,v)})})}bulkDelete(t){const e=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:o,failures:a})=>{if(0===r)return o;throw new ln(`${this.name}.bulkDelete(): ${r} of ${e} operations failed`,a)})}}function yn(n){var t={},e=function(l,c){if(c){for(var g=arguments.length,d=new Array(g-1);--g;)d[g-1]=arguments[g];return t[l].subscribe.apply(null,d),n}if("string"==typeof l)return t[l]};e.addEventType=a;for(var r=1,o=arguments.length;r<o;++r)a(arguments[r]);return e;function a(l,c,g){if("object"==typeof l)return s(l);c||(c=zr),g||(g=N);var d={subscribers:[],fire:g,subscribe:function(h){-1===d.subscribers.indexOf(h)&&(d.subscribers.push(h),d.fire=c(d.fire,h))},unsubscribe:function(h){d.subscribers=d.subscribers.filter(function(u){return u!==h}),d.fire=d.subscribers.reduce(c,g)}};return t[l]=e[l]=d,d}function s(l){p(l).forEach(function(c){var g=l[c];if(b(g))a(c,l[c][0],l[c][1]);else{if("asap"!==g)throw new K.InvalidArgument("Invalid event config");var d=a(c,un,function(){for(var h=arguments.length,u=new Array(h);h--;)u[h]=arguments[h];d.subscribers.forEach(function(f){sn(function(){f.apply(null,u)})})})}})}}function _n(n,t){return gt(t).from({prototype:n}),t}function Vt(n,t){return!(n.filter||n.algorithm||n.or)&&(t?n.justLimit:!n.replayFilter)}function Se(n,t){n.filter=Nt(n.filter,t)}function je(n,t,e){var r=n.replayFilter;n.replayFilter=r?()=>Nt(r(),t()):t,n.justLimit=e&&!r}function Vn(n,t){if(n.isPrimKey)return t.primaryKey;const e=t.getIndexByKeyPath(n.index);if(!e)throw new K.Schema("KeyPath "+n.index+" on object store "+t.name+" is not indexed");return e}function yr(n,t,e){const r=Vn(n,t.schema);return t.openCursor({trans:e,values:!n.keysOnly,reverse:"prev"===n.dir,unique:!!n.unique,query:{index:r,range:n.range}})}function Xn(n,t,e,r){const o=n.replayFilter?Nt(n.filter,n.replayFilter()):n.filter;if(n.or){const a={},s=(l,c,g)=>{if(!o||o(c,g,u=>c.stop(u),u=>c.fail(u))){var d=c.primaryKey,h=""+d;"[object ArrayBuffer]"===h&&(h=""+new Uint8Array(d)),D(a,h)||(a[h]=!0,t(l,c,g))}};return Promise.all([n.or._iterate(s,e),_r(yr(n,r,e),n.algorithm,s,!n.keysOnly&&n.valueMapper)])}return _r(yr(n,r,e),Nt(n.algorithm,o),t,!n.keysOnly&&n.valueMapper)}function _r(n,t,e,r){var o=$(r?(a,s,l)=>e(r(a),s,l):e);return n.then(a=>{if(a)return a.start(()=>{var s=()=>a.continue();t&&!t(a,l=>s=l,l=>{a.stop(l),s=N},l=>{a.fail(l),s=N})||o(a.value,a,l=>s=l),s()})})}function it(n,t){try{const e=br(n),r=br(t);if(e!==r)return"Array"===e?1:"Array"===r?-1:"binary"===e?1:"binary"===r?-1:"string"===e?1:"string"===r?-1:"Date"===e?1:"Date"!==r?NaN:-1;switch(e){case"number":case"Date":case"string":return n>t?1:n<t?-1:0;case"binary":return function(o,a){const s=o.length,l=a.length,c=s<l?s:l;for(let g=0;g<c;++g)if(o[g]!==a[g])return o[g]<a[g]?-1:1;return s===l?0:s<l?-1:1}(vr(n),vr(t));case"Array":return function(o,a){const s=o.length,l=a.length,c=s<l?s:l;for(let g=0;g<c;++g){const d=it(o[g],a[g]);if(0!==d)return d}return s===l?0:s<l?-1:1}(n,t)}}catch(e){}return NaN}function br(n){const t=typeof n;if("object"!==t)return t;if(ArrayBuffer.isView(n))return"binary";const e=cn(n);return"ArrayBuffer"===e?"binary":e}function vr(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}class to{_read(t,e){var r=this._ctx;return r.error?r.table._trans(null,H.bind(null,r.error)):r.table._trans("readonly",t).then(e)}_write(t){var e=this._ctx;return e.error?e.table._trans(null,H.bind(null,e.error)):e.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var e=this._ctx;e.algorithm=Nt(e.algorithm,t)}_iterate(t,e){return Xn(this._ctx,t,e,this._ctx.table.core)}clone(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&T(r,t),e._ctx=r,e}raw(){return this._ctx.valueMapper=null,this}each(t){var e=this._ctx;return this._read(r=>Xn(e,t,r,e.table.core))}count(t){return this._read(e=>{const r=this._ctx,o=r.table.core;if(Vt(r,!0))return o.count({trans:e,query:{index:Vn(r,o.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var a=0;return Xn(r,()=>(++a,!1),e,o).then(()=>a)}).then(t)}sortBy(t,e){const r=t.split(".").reverse(),o=r[0],a=r.length-1;function s(g,d){return d?s(g[r[d]],d-1):g[o]}var l="next"===this._ctx.dir?1:-1;function c(g,d){var h=s(g,a),u=s(d,a);return h<u?-l:h>u?l:0}return this.toArray(function(g){return g.sort(c)}).then(e)}toArray(t){return this._read(e=>{var r=this._ctx;if("next"===r.dir&&Vt(r,!0)&&r.limit>0){const{valueMapper:o}=r,a=Vn(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(({result:s})=>o?s.map(o):s)}{const o=[];return Xn(r,a=>o.push(a),e,r.table.core).then(()=>o)}},t)}offset(t){var e=this._ctx;return t<=0||(e.offset+=t,Vt(e)?je(e,()=>{var r=t;return(o,a)=>0===r||(1===r?(--r,!1):(a(()=>{o.advance(r),r=0}),!1))}):je(e,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),je(this._ctx,()=>{var e=t;return function(r,o,a){return--e<=0&&o(a),e>=0}},!0),this}until(t,e){return Se(this._ctx,function(r,o,a){return!t(r.value)||(o(a),e)}),this}first(t){return this.limit(1).toArray(function(e){return e[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var e;return Se(this._ctx,function(o){return t(o.value)}),(e=this._ctx).isMatch=Nt(e.isMatch,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(r,o){t(o.key,o)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(r,o){t(o.primaryKey,o)})}keys(t){var e=this._ctx;e.keysOnly=!e.isMatch;var r=[];return this.each(function(o,a){r.push(a.key)}).then(function(){return r}).then(t)}primaryKeys(t){var e=this._ctx;if("next"===e.dir&&Vt(e,!0)&&e.limit>0)return this._read(o=>{var a=Vn(e,e.table.core.schema);return e.table.core.query({trans:o,values:!1,limit:e.limit,query:{index:a,range:e.range}})}).then(({result:o})=>o).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each(function(o,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(e){return e[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var r={};return Se(this._ctx,function(o){var a=o.primaryKey.toString(),s=D(r,a);return r[a]=!0,!s}),this}modify(t){var e=this._ctx;return this._write(r=>{var o;if("function"==typeof t)o=t;else{var a=p(t),s=a.length;o=function(_){for(var P=!1,y=0;y<s;++y){var m=a[y],w=t[m];pt(_,m)!==w&&(rt(_,m,w),P=!0)}return P}}const l=e.table.core,{outbound:c,extractKey:g}=l.schema.primaryKey,d=this.db._options.modifyChunkSize||200,h=[];let u=0;const f=[],v=(_,P)=>{const{failures:y,numFailures:m}=P;u+=_-m;for(let w of p(y))h.push(y[w])};return this.clone().primaryKeys().then(_=>{const P=y=>{const m=Math.min(d,_.length-y);return l.getMany({trans:r,keys:_.slice(y,y+m),cache:"immutable"}).then(w=>{const I=[],k=[],C=c?[]:null,O=[];for(let E=0;E<m;++E){const q=w[E],Y={value:dt(q),primKey:_[y+E]};!1!==o.call(Y,Y.value,Y)&&(null==Y.value?O.push(_[y+E]):c||0===it(g(q),g(Y.value))?(k.push(Y.value),c&&C.push(_[y+E])):(O.push(_[y+E]),I.push(Y.value)))}const Z=Vt(e)&&e.limit===1/0&&("function"!=typeof t||t===Ke)&&{index:e.index,range:e.range};return Promise.resolve(I.length>0&&l.mutate({trans:r,type:"add",values:I}).then(E=>{for(let q in E.failures)O.splice(parseInt(q),1);v(I.length,E)})).then(()=>(k.length>0||Z&&"object"==typeof t)&&l.mutate({trans:r,type:"put",keys:C,values:k,criteria:Z,changeSpec:"function"!=typeof t&&t}).then(E=>v(k.length,E))).then(()=>(O.length>0||Z&&t===Ke)&&l.mutate({trans:r,type:"delete",keys:O,criteria:Z}).then(E=>v(O.length,E))).then(()=>_.length>y+m&&P(y+d))})};return P(0).then(()=>{if(h.length>0)throw new Dn("Error modifying one or more objects",h,u,f);return _.length})})})}delete(){var t=this._ctx,e=t.range;return Vt(t)&&(t.isPrimKey&&!Vr||3===e.type)?this._write(r=>{const{primaryKey:o}=t.table.core.schema,a=e;return t.table.core.count({trans:r,query:{index:o,range:a}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(({failures:l,numFailures:d})=>{if(d)throw new Dn("Could not delete some values",Object.keys(l).map(h=>l[h]),s-d);return s-d}))}):this.modify(Ke)}}const Ke=(n,t)=>t.value=null;function no(n,t){return n<t?-1:n===t?0:1}function eo(n,t){return n>t?-1:n===t?0:1}function ut(n,t,e){var r=n instanceof xr?new n.Collection(n):n;return r._ctx.error=e?new e(t):new TypeError(t),r}function Xt(n){return new n.Collection(n,()=>Pr("")).limit(0)}function ro(n,t,e,r,o,a){for(var s=Math.min(n.length,r.length),l=-1,c=0;c<s;++c){var g=t[c];if(g!==r[c])return o(n[c],e[c])<0?n.substr(0,c)+e[c]+e.substr(c+1):o(n[c],r[c])<0?n.substr(0,c)+r[c]+e.substr(c+1):l>=0?n.substr(0,l)+t[l]+e.substr(l+1):null;o(n[c],g)<0&&(l=c)}return s<r.length&&"next"===a?n+e.substr(n.length):s<n.length&&"prev"===a?n.substr(0,e.length):l<0?null:n.substr(0,l)+r[l]+e.substr(l+1)}function te(n,t,e,r){var o,a,s,l,c,g,d,h=e.length;if(!e.every(_=>"string"==typeof _))return ut(n,"String expected.");function u(_){o="next"===_?m=>m.toUpperCase():m=>m.toLowerCase(),a="next"===_?m=>m.toLowerCase():m=>m.toUpperCase(),s="next"===_?no:eo;var P=e.map(function(y){return{lower:a(y),upper:o(y)}}).sort(function(y,m){return s(y.lower,m.lower)});l=P.map(function(y){return y.upper}),c=P.map(function(y){return y.lower}),g=_,d="next"===_?"":r}u("next");var f=new n.Collection(n,()=>At(l[0],c[h-1]+r));f._ondirectionchange=function(_){u(_)};var v=0;return f._addAlgorithm(function(_,P,y){var m=_.key;if("string"!=typeof m)return!1;var w=a(m);if(t(w,c,v))return!0;for(var I=null,k=v;k<h;++k){var C=ro(m,w,l[k],c[k],s,g);null===C&&null===I?v=k+1:(null===I||s(I,C)>0)&&(I=C)}return P(null!==I?function(){_.continue(I+d)}:y),!1}),f}function At(n,t,e,r){return{type:2,lower:n,upper:t,lowerOpen:e,upperOpen:r}}function Pr(n){return{type:1,lower:n,upper:n}}class xr{get Collection(){return this._ctx.table.db.Collection}between(t,e,r,o){r=!1!==r,o=!0===o;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(r||o)&&(!r||!o)?Xt(this):new this.Collection(this,()=>At(t,e,!r,!o))}catch(a){return ut(this,xt)}}equals(t){return null==t?ut(this,xt):new this.Collection(this,()=>Pr(t))}above(t){return null==t?ut(this,xt):new this.Collection(this,()=>At(t,void 0,!0))}aboveOrEqual(t){return null==t?ut(this,xt):new this.Collection(this,()=>At(t,void 0,!1))}below(t){return null==t?ut(this,xt):new this.Collection(this,()=>At(void 0,t,!1,!0))}belowOrEqual(t){return null==t?ut(this,xt):new this.Collection(this,()=>At(void 0,t))}startsWith(t){return"string"!=typeof t?ut(this,"String expected."):this.between(t,t+Lt,!0,!0)}startsWithIgnoreCase(t){return""===t?this.startsWith(t):te(this,(e,r)=>0===e.indexOf(r[0]),[t],Lt)}equalsIgnoreCase(t){return te(this,(e,r)=>e===r[0],[t],"")}anyOfIgnoreCase(){var t=ft.apply(vt,arguments);return 0===t.length?Xt(this):te(this,(e,r)=>-1!==r.indexOf(e),t,"")}startsWithAnyOfIgnoreCase(){var t=ft.apply(vt,arguments);return 0===t.length?Xt(this):te(this,(e,r)=>r.some(o=>0===e.indexOf(o)),t,Lt)}anyOf(){const t=ft.apply(vt,arguments);let e=this._cmp;try{t.sort(e)}catch(a){return ut(this,xt)}if(0===t.length)return Xt(this);const r=new this.Collection(this,()=>At(t[0],t[t.length-1]));r._ondirectionchange=a=>{e="next"===a?this._ascending:this._descending,t.sort(e)};let o=0;return r._addAlgorithm((a,s,l)=>{const c=a.key;for(;e(c,t[o])>0;)if(++o,o===t.length)return s(l),!1;return 0===e(c,t[o])||(s(()=>{a.continue(t[o])}),!1)}),r}notEqual(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=ft.apply(vt,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(r){return ut(this,xt)}const e=t.reduce((r,o)=>r?r.concat([[r[r.length-1][1],o]]):[[-1/0,o]],null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,e){const r=this._cmp,o=this._ascending,a=this._descending,s=this._min,l=this._max;if(0===t.length)return Xt(this);if(!t.every(m=>void 0!==m[0]&&void 0!==m[1]&&o(m[0],m[1])<=0))return ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);const c=!e||!1!==e.includeLowers,g=e&&!0===e.includeUppers;let d,h=o;function u(m,w){return h(m[0],w[0])}try{d=t.reduce(function(m,w){let I=0,k=m.length;for(;I<k;++I){const C=m[I];if(r(w[0],C[1])<0&&r(w[1],C[0])>0){C[0]=s(C[0],w[0]),C[1]=l(C[1],w[1]);break}}return I===k&&m.push(w),m},[]),d.sort(u)}catch(m){return ut(this,xt)}let f=0;const v=g?m=>o(m,d[f][1])>0:m=>o(m,d[f][1])>=0,_=c?m=>a(m,d[f][0])>0:m=>a(m,d[f][0])>=0;let P=v;const y=new this.Collection(this,()=>At(d[0][0],d[d.length-1][1],!c,!g));return y._ondirectionchange=m=>{"next"===m?(P=v,h=o):(P=_,h=a),d.sort(u)},y._addAlgorithm((m,w,I)=>{for(var k=m.key;P(k);)if(++f,f===d.length)return w(I),!1;return!((v(C=k)||_(C))&&(0===this._cmp(k,d[f][1])||0===this._cmp(k,d[f][0])||w(()=>{m.continue(h===o?d[f][0]:d[f][1])}),1));var C}),y}startsWithAnyOf(){const t=ft.apply(vt,arguments);return t.every(e=>"string"==typeof e)?0===t.length?Xt(this):this.inAnyRange(t.map(e=>[e,e+Lt])):ut(this,"startsWithAnyOf() only works with strings")}}function _t(n){return $(function(t){return bn(t),n(t.target.error),!1})}function bn(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}const St=yn(null,"storagemutated");class oo{_lock(){return Bt(!A.global),++this._reculock,1!==this._reculock||A.global||(A.lockOwnerFor=this),this}_unlock(){if(Bt(!A.global),0==--this._reculock)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ht(t[1],t[0])}catch(e){}}return this}_locked(){return this._reculock&&A.lockOwnerFor!==this}create(t){if(!this.mode)return this;const e=this.db.idbdb,r=this.db._state.dbOpenError;if(Bt(!this.idbtrans),!t&&!e)switch(r&&r.name){case"DatabaseClosedError":throw new K.DatabaseClosed(r);case"MissingAPIError":throw new K.MissingAPI(r.message,r);default:throw new K.OpenFailed(r)}if(!this.active)throw new K.TransactionInactive;return Bt(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):e.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=$(o=>{bn(o),this._reject(t.error)}),t.onabort=$(o=>{bn(o),this.active&&this._reject(new K.Abort(t.error)),this.active=!1,this.on("abort").fire(o)}),t.oncomplete=$(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&St.storagemutated.fire(t.mutatedParts)}),this}_promise(t,e,r){if("readwrite"===t&&"readwrite"!==this.mode)return H(new K.ReadOnly("Transaction is readonly"));if(!this.active)return H(new K.TransactionInactive);if(this._locked())return new M((a,s)=>{this._blockedFuncs.push([()=>{this._promise(t,e,r).then(a,s)},A])});if(r)return Et(()=>{var a=new M((s,l)=>{this._lock();const c=e(s,l,this);c&&c.then&&c.then(s,l)});return a.finally(()=>this._unlock()),a._lib=!0,a});var o=new M((a,s)=>{var l=e(a,s,this);l&&l.then&&l.then(a,s)});return o._lib=!0,o}_root(){return this.parent?this.parent._root():this}waitFor(t){var e=this._root();const r=M.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(()=>r);else{e._waitingFor=r,e._waitingQueue=[];var o=e.idbtrans.objectStore(e.storeNames[0]);!function s(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(o.get(-1/0).onsuccess=s)}()}var a=e._waitingFor;return new M((s,l)=>{r.then(c=>e._waitingQueue.push($(s.bind(null,c))),c=>e._waitingQueue.push($(l.bind(null,c)))).finally(()=>{e._waitingFor===a&&(e._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))}table(t){const e=this._memoizedTables||(this._memoizedTables={});if(D(e,t))return e[t];const r=this.schema[t];if(!r)throw new K.NotFound("Table "+t+" not part of transaction");const o=new this.db.Table(t,r,this);return o.core=this.db.core.table(t),e[t]=o,o}}function Be(n,t,e,r,o,a,s){return{name:n,keyPath:t,unique:e,multi:r,auto:o,compound:a,src:(e&&!s?"&":"")+(r?"*":"")+(o?"++":"")+Cr(t)}}function Cr(n){return"string"==typeof n?n:n?"["+[].join.call(n,"+")+"]":""}function wr(n,t,e){return{name:n,primKey:t,indexes:e,mappedClass:null,idxByName:Kn(e,r=>[r.name,r])}}let vn=n=>{try{return n.only([[]]),vn=()=>[[]],[[]]}catch(t){return vn=()=>Lt,Lt}};function Ze(n){return null==n?()=>{}:"string"==typeof n?1===(t=n).split(".").length?e=>e[t]:e=>pt(e,t):t=>pt(t,n);var t}function Or(n){return[].slice.call(n)}let io=0;function Pn(n){return null==n?":id":"string"==typeof n?n:`[${n.join("+")}]`}function ao(n,t,e){function r(c){if(3===c.type)return null;if(4===c.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:g,upper:d,lowerOpen:h,upperOpen:u}=c;return void 0===g?void 0===d?null:t.upperBound(d,!!u):void 0===d?t.lowerBound(g,!!h):t.bound(g,d,!!h,!!u)}const{schema:o,hasGetAll:a}=function(c,g){const d=Or(c.objectStoreNames);return{schema:{name:c.name,tables:d.map(h=>g.objectStore(h)).map(h=>{const{keyPath:u,autoIncrement:f}=h,v=b(u),P={},y={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==u,compound:v,keyPath:u,autoIncrement:f,unique:!0,extractKey:Ze(u)},indexes:Or(h.indexNames).map(m=>h.index(m)).map(m=>{const{name:w,unique:I,multiEntry:k,keyPath:C}=m,O={name:w,compound:b(C),keyPath:C,unique:I,multiEntry:k,extractKey:Ze(C)};return P[Pn(C)]=O,O}),getIndexByKeyPath:m=>P[Pn(m)]};return P[":id"]=y.primaryKey,null!=u&&(P[Pn(u)]=y.primaryKey),y})},hasGetAll:d.length>0&&"getAll"in g.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(n,e),s=o.tables.map(c=>function(g){const d=g.name;return{name:d,schema:g,mutate:function({trans:h,type:u,keys:f,values:v,range:_}){return new Promise((P,y)=>{P=$(P);const m=h.objectStore(d),w=null==m.keyPath,I="put"===u||"add"===u;if(!I&&"delete"!==u&&"deleteRange"!==u)throw new Error("Invalid operation type: "+u);const{length:k}=f||v||{length:1};if(f&&v&&f.length!==v.length)throw new Error("Given keys array must have same length as given values array.");if(0===k)return P({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const O=[],Z=[];let E=0;const q=at=>{++E,bn(at)};if("deleteRange"===u){if(4===_.type)return P({numFailures:E,failures:Z,results:[],lastResult:void 0});O.push(C=3===_.type?m.clear():m.delete(r(_)))}else{const[at,et]=I?w?[v,f]:[v,null]:[f,null];if(I)for(let G=0;G<k;++G)O.push(C=et&&void 0!==et[G]?m[u](at[G],et[G]):m[u](at[G])),C.onerror=q;else for(let G=0;G<k;++G)O.push(C=m[u](at[G])),C.onerror=q}const Y=at=>{const et=at.target.result;O.forEach((G,tn)=>null!=G.error&&(Z[tn]=G.error)),P({numFailures:E,failures:Z,results:"delete"===u?f:O.map(G=>G.result),lastResult:et})};C.onerror=at=>{q(at),Y(at)},C.onsuccess=Y})},getMany:({trans:h,keys:u})=>new Promise((f,v)=>{f=$(f);const _=h.objectStore(d),P=u.length,y=new Array(P);let m,w=0,I=0;const k=O=>{const Z=O.target;y[Z._pos]=Z.result,++I===w&&f(y)},C=_t(v);for(let O=0;O<P;++O)null!=u[O]&&(m=_.get(u[O]),m._pos=O,m.onsuccess=k,m.onerror=C,++w);0===w&&f(y)}),get:({trans:h,key:u})=>new Promise((f,v)=>{f=$(f);const _=h.objectStore(d).get(u);_.onsuccess=P=>f(P.target.result),_.onerror=_t(v)}),query:(h=a,u=>new Promise((f,v)=>{f=$(f);const{trans:_,values:P,limit:y,query:m}=u,w=y===1/0?void 0:y,{index:I,range:k}=m,C=_.objectStore(d),O=I.isPrimaryKey?C:C.index(I.name),Z=r(k);if(0===y)return f({result:[]});if(h){const E=P?O.getAll(Z,w):O.getAllKeys(Z,w);E.onsuccess=q=>f({result:q.target.result}),E.onerror=_t(v)}else{let E=0;const q=P||!("openKeyCursor"in O)?O.openCursor(Z):O.openKeyCursor(Z),Y=[];q.onsuccess=at=>{const et=q.result;return et?(Y.push(P?et.value:et.primaryKey),++E===y?f({result:Y}):void et.continue()):f({result:Y})},q.onerror=_t(v)}})),openCursor:function({trans:h,values:u,query:f,reverse:v,unique:_}){return new Promise((P,y)=>{P=$(P);const{index:m,range:w}=f,I=h.objectStore(d),k=m.isPrimaryKey?I:I.index(m.name),C=v?_?"prevunique":"prev":_?"nextunique":"next",O=u||!("openKeyCursor"in k)?k.openCursor(r(w),C):k.openKeyCursor(r(w),C);O.onerror=_t(y),O.onsuccess=$(Z=>{const E=O.result;if(!E)return void P(null);E.___id=++io,E.done=!1;const q=E.continue.bind(E);let Y=E.continuePrimaryKey;Y&&(Y=Y.bind(E));const at=E.advance.bind(E),et=()=>{throw new Error("Cursor not stopped")};E.trans=h,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=$(y),E.next=function(){let G=1;return this.start(()=>G--?this.continue():this.stop()).then(()=>this)},E.start=G=>{const tn=new Promise((st,$t)=>{st=$(st),O.onerror=_t($t),E.fail=$t,E.stop=Mn=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=et,st(Mn)}}),nn=()=>{if(O.result)try{G()}catch(st){E.fail(st)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return O.onsuccess=$(st=>{O.onsuccess=nn,nn()}),E.continue=q,E.continuePrimaryKey=Y,E.advance=at,nn(),tn},P(E)},y)})},count({query:h,trans:u}){const{index:f,range:v}=h;return new Promise((_,P)=>{const y=u.objectStore(d),m=f.isPrimaryKey?y:y.index(f.name),w=r(v),I=w?m.count(w):m.count();I.onsuccess=$(k=>_(k.target.result)),I.onerror=_t(P)})}};var h}(c)),l={};return s.forEach(c=>l[c.name]=c),{stack:"dbcore",transaction:n.transaction.bind(n),table(c){if(!l[c])throw new Error(`Table '${c}' not found`);return l[c]},MIN_KEY:-1/0,MAX_KEY:vn(t),schema:o}}function De({_novip:n},t){const r=function(o,a,{IDBKeyRange:s},c){return{dbcore:(d=ao(a,s,c),h=o.dbcore,h.reduce((u,{create:f})=>({...u,...f(u)}),d))};var d,h}(n._middlewares,t.db,n._deps,t);n.core=r.dbcore,n.tables.forEach(o=>{const a=o.name;n.core.schema.tables.some(s=>s.name===a)&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function ne({_novip:n},t,e,r){e.forEach(o=>{const a=r[o];t.forEach(s=>{const l=Kt(s,o);(!l||"value"in l&&void 0===l.value)&&(s===n.Transaction.prototype||s instanceof n.Transaction?U(s,o,{get(){return this.table(o)},set(c){J(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new n.Table(o,a))})})}function Re({_novip:n},t){t.forEach(e=>{for(let r in e)e[r]instanceof n.Table&&delete e[r]})}function so(n,t){return n._cfg.version-t._cfg.version}function Mr(n,t){const e={del:[],add:[],change:[]};let r;for(r in n)t[r]||e.del.push(r);for(r in t){const o=n[r],a=t[r];if(o){const s={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto&&!Jn)s.recreate=!0,e.change.push(s);else{const l=o.idxByName,c=a.idxByName;let g;for(g in l)c[g]||s.del.push(g);for(g in c){const d=l[g],h=c[g];d?d.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&e.change.push(s)}}else e.add.push([r,a])}return e}function Ue(n,t,e,r){const o=n.db.createObjectStore(t,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(a=>Fe(o,a)),o}function Fe(n,t){n.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Le(n,t,e){const r={};return Yt(t.objectStoreNames,0).forEach(o=>{const a=e.objectStore(o);let s=a.keyPath;const l=Be(Cr(s),s||"",!1,!1,!!a.autoIncrement,s&&"string"!=typeof s,!0),c=[];for(let d=0;d<a.indexNames.length;++d){const h=a.index(a.indexNames[d]);s=h.keyPath;var g=Be(h.name,s,!!h.unique,!!h.multiEntry,!1,s&&"string"!=typeof s,!1);c.push(g)}r[o]=wr(o,l,c)}),r}function Ne({_novip:n},t,e){const r=e.db.objectStoreNames;for(let o=0;o<r.length;++o){const a=r[o],s=e.objectStore(a);n._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const c=s.indexNames[l],g=s.index(c).keyPath,d="string"==typeof g?g:"["+Yt(g).join("+")+"]";if(t[a]){const h=t[a].idxByName[d];h&&(h.name=c,delete t[a].idxByName[d],t[a].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&x.WorkerGlobalScope&&x instanceof x.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}class lo{_parseStoresSpec(t,e){p(t).forEach(r=>{if(null!==t[r]){var o=t[r].split(",").map((s,l)=>{const c=(s=s.trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Be(c,g||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),b(g),0===l)}),a=o.shift();if(a.multi)throw new K.Schema("Primary key cannot be multi-valued");o.forEach(s=>{if(s.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),e[r]=wr(r,a,o)}})}stores(t){const e=this.db;this._cfg.storesSource=this._cfg.storesSource?T(this._cfg.storesSource,t):t;const o={};let a={};return e._versions.forEach(s=>{T(o,s._cfg.storesSource),a=s._cfg.dbschema={},s._parseStoresSpec(o,a)}),e._dbSchema=a,Re(e,[e._allTables,e,e.Transaction.prototype]),ne(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],p(a),a),e._storeNames=p(a),this}upgrade(t){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||N,t),this}}function qe(n,t){let e=n._dbNamesDB;return e||(e=n._dbNamesDB=new qt("__dbnames",{addons:[],indexedDB:n,IDBKeyRange:t}),e.version(1).stores({dbnames:"name"})),e.table("dbnames")}function ze(n){return n&&"function"==typeof n.databases}function $e(n){return Et(function(){return A.letThrough=!0,n()})}function uo(){var n;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var e=function(){return indexedDB.databases().finally(t)};n=setInterval(e,100),e()}).finally(function(){return clearInterval(n)}):Promise.resolve()}function Qe(n){var t=a=>n.next(a),e=o(t),r=o(a=>n.throw(a));function o(a){return s=>{var l=a(s),c=l.value;return l.done?c:c&&"function"==typeof c.then?c.then(e,r):b(c)?Promise.all(c).then(e,r):e(c)}}return o(t)()}function go(n,t,e){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];e=o.pop();var a=Q(o);return[n,a,e]}function kr(n,t,e,r,o){return M.resolve().then(()=>{const a=A.transless||A,s=n._createTransaction(t,e,n._dbSchema,r),l={trans:s,transless:a};if(r)s.idbtrans=r.idbtrans;else try{s.create(),n._state.PR1398_maxLoop=3}catch(h){return h.name===ye.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>kr(n,t,e,null,o))):H(h)}const c=Dt(o);let g;c&&Jt();const d=M.follow(()=>{if(g=o.call(s,s),g)if(c){var h=Pt.bind(null,null);g.then(h,h)}else"function"==typeof g.next&&"function"==typeof g.throw&&(g=Qe(g))},l);return(g&&"function"==typeof g.then?M.resolve(g).then(h=>s.active?h:H(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>g)).then(h=>(r&&s._resolve(),s._completion.then(()=>h))).catch(h=>(s._reject(h),H(h)))})}function ee(n,t,e){const r=b(n)?n.slice():[n];for(let o=0;o<e;++o)r.push(t);return r}const po={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return{...n,table(t){const e=n.table(t),{schema:r}=e,o={},a=[];function s(d,h,u){const f=Pn(d),v=o[f]=o[f]||[],_=null==d?0:"string"==typeof d?1:d.length,P=h>0,y={...u,isVirtual:P,keyTail:h,keyLength:_,extractKey:Ze(d),unique:!P&&u.unique};return v.push(y),y.isPrimaryKey||a.push(y),_>1&&s(2===_?d[0]:d.slice(0,_-1),h+1,u),v.sort((m,w)=>m.keyTail-w.keyTail),y}const l=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[l];for(const d of r.indexes)s(d.keyPath,0,d);function c(d){const h=d.query.index;return h.isVirtual?{...d,query:{index:h,range:(u=d.query.range,f=h.keyTail,{type:1===u.type?2:u.type,lower:ee(u.lower,u.lowerOpen?n.MAX_KEY:n.MIN_KEY,f),lowerOpen:!0,upper:ee(u.upper,u.upperOpen?n.MIN_KEY:n.MAX_KEY,f),upperOpen:!0})}}:d;var u,f}return{...e,schema:{...r,primaryKey:l,indexes:a,getIndexByKeyPath:function(d){const h=o[Pn(d)];return h&&h[0]}},count:d=>e.count(c(d)),query:d=>e.query(c(d)),openCursor(d){const{keyTail:h,isVirtual:u,keyLength:f}=d.query.index;return u?e.openCursor(c(d)).then(v=>{return v&&(_=v,Object.create(_,{continue:{value:function(y){null!=y?_.continue(ee(y,d.reverse?n.MAX_KEY:n.MIN_KEY,h)):d.unique?_.continue(_.key.slice(0,f).concat(d.reverse?n.MIN_KEY:n.MAX_KEY,h)):_.continue()}},continuePrimaryKey:{value(y,m){_.continuePrimaryKey(ee(y,n.MAX_KEY,h),m)}},primaryKey:{get:()=>_.primaryKey},key:{get(){const y=_.key;return 1===f?y[0]:y.slice(0,f)}},value:{get:()=>_.value}}));var _}):e.openCursor(d)}}}}}};function Ye(n,t,e,r){return e=e||{},r=r||"",p(n).forEach(o=>{if(D(t,o)){var a=n[o],s=t[o];if("object"==typeof a&&"object"==typeof s&&a&&s){const l=cn(a);l!==cn(s)?e[r+o]=t[o]:"Object"===l?Ye(a,s,e,r+o+"."):a!==s&&(e[r+o]=t[o])}else a!==s&&(e[r+o]=t[o])}else e[r+o]=void 0}),p(t).forEach(o=>{D(n,o)||(e[r+o]=t[o])}),e}const fo={stack:"dbcore",name:"HooksMiddleware",level:2,create:n=>({...n,table(t){const e=n.table(t),{primaryKey:r}=e.schema;return{...e,mutate(a){const s=A.trans,{deleting:l,creating:c,updating:g}=s.table(t).hook;switch(a.type){case"add":if(c.fire===N)break;return s._promise("readwrite",()=>d(a),!0);case"put":if(c.fire===N&&g.fire===N)break;return s._promise("readwrite",()=>d(a),!0);case"delete":if(l.fire===N)break;return s._promise("readwrite",()=>d(a),!0);case"deleteRange":if(l.fire===N)break;return s._promise("readwrite",()=>{return h((u=a).trans,u.range,1e4);var u},!0)}return e.mutate(a);function d(u){const f=A.trans,v=u.keys||("delete"===(P=u).type?P.keys:P.keys||P.values.map(r.extractKey));var P;if(!v)throw new Error("Keys missing");return"delete"!==(u="add"===u.type||"put"===u.type?{...u,keys:v}:{...u}).type&&(u.values=[...u.values]),u.keys&&(u.keys=[...u.keys]),function(_,P,y){return"add"===P.type?Promise.resolve([]):_.getMany({trans:P.trans,keys:y,cache:"immutable"})}(e,u,v).then(_=>{const P=v.map((y,m)=>{const w=_[m],I={onerror:null,onsuccess:null};if("delete"===u.type)l.fire.call(I,y,w,f);else if("add"===u.type||void 0===w){const k=c.fire.call(I,y,u.values[m],f);null==y&&null!=k&&(u.keys[m]=y=k,r.outbound||rt(u.values[m],r.keyPath,y))}else{const k=Ye(w,u.values[m]),C=g.fire.call(I,k,y,w,f);if(C){const O=u.values[m];Object.keys(C).forEach(Z=>{D(O,Z)?O[Z]=C[Z]:rt(O,Z,C[Z])})}}return I});return e.mutate(u).then(({failures:y,results:m,numFailures:w,lastResult:I})=>{for(let k=0;k<v.length;++k){const C=m?m[k]:v[k],O=P[k];null==C?O.onerror&&O.onerror(y[k]):O.onsuccess&&O.onsuccess("put"===u.type&&_[k]?u.values[k]:C)}return{failures:y,results:m,numFailures:w,lastResult:I}}).catch(y=>(P.forEach(m=>m.onerror&&m.onerror(y)),Promise.reject(y)))})}function h(u,f,v){return e.query({trans:u,values:!1,query:{index:r,range:f},limit:v}).then(({result:_})=>d({type:"delete",keys:_,trans:u}).then(P=>P.numFailures>0?Promise.reject(P.failures[0]):_.length<v?{failures:[],numFailures:0,lastResult:void 0}:h(u,{...f,lower:_[_.length-1],lowerOpen:!0},v)))}}}}})};function Tr(n,t,e){try{if(!t||t.keys.length<n.length)return null;const r=[];for(let o=0,a=0;o<t.keys.length&&a<n.length;++o)0===it(t.keys[o],n[a])&&(r.push(e?dt(t.values[o]):t.values[o]),++a);return r.length===n.length?r:null}catch(r){return null}}const mo={stack:"dbcore",level:-1,create:n=>({table:t=>{const e=n.table(t);return{...e,getMany:r=>{if(!r.cache)return e.getMany(r);const o=Tr(r.keys,r.trans._cache,"clone"===r.cache);return o?M.resolve(o):e.getMany(r).then(a=>(r.trans._cache={keys:r.keys,values:"clone"===r.cache?dt(a):a},a))},mutate:r=>("add"!==r.type&&(r.trans._cache=null),e.mutate(r))}}})};function We(n){return!("from"in n)}const Ct=function(n,t){if(!this){const e=new Ct;return n&&"d"in n&&T(e,n),e}T(this,arguments.length?{d:1,from:n,to:arguments.length>1?t:n}:{d:0})};function xn(n,t,e){const r=it(t,e);if(isNaN(r))return;if(r>0)throw RangeError();if(We(n))return T(n,{from:t,to:e,d:1});const o=n.l,a=n.r;if(it(e,n.from)<0)return o?xn(o,t,e):n.l={from:t,to:e,d:1,l:null,r:null},Er(n);if(it(t,n.to)>0)return a?xn(a,t,e):n.r={from:t,to:e,d:1,l:null,r:null},Er(n);it(t,n.from)<0&&(n.from=t,n.l=null,n.d=a?a.d+1:1),it(e,n.to)>0&&(n.to=e,n.r=null,n.d=n.l?n.l.d+1:1);const s=!n.r;o&&!n.l&&re(n,o),a&&s&&re(n,a)}function re(n,t){We(t)||function e(r,{from:o,to:a,l:s,r:l}){xn(r,o,a),s&&e(r,s),l&&e(r,l)}(n,t)}function Ge(n){let t=We(n)?null:{s:0,n};return{next(e){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&it(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||it(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(n){var t,e;const r=((null===(t=n.r)||void 0===t?void 0:t.d)||0)-((null===(e=n.l)||void 0===e?void 0:e.d)||0),o=r>1?"r":r<-1?"l":"";if(o){const a="r"===o?"l":"r",s={...n},l=n[o];n.from=l.from,n.to=l.to,n[o]=l[o],s[o]=l[a],n[a]=s,s.d=Ir(s)}n.d=Ir(n)}function Ir({r:n,l:t}){return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}j(Ct.prototype,{add(n){return re(this,n),this},addKey(n){return xn(this,n,n),this},addKeys(n){return n.forEach(t=>xn(this,t,t)),this},[Zt](){return Ge(this)}});const _o={stack:"dbcore",level:0,create:n=>{const t=n.schema.name,e=new Ct(n.MIN_KEY,n.MAX_KEY);return{...n,table:r=>{const o=n.table(r),{schema:a}=o,{primaryKey:s}=a,{extractKey:l,outbound:c}=s,g={...o,mutate:u=>{const f=u.trans,v=f.mutatedParts||(f.mutatedParts={}),_=C=>{const O=`idb://${t}/${r}/${C}`;return v[O]||(v[O]=new Ct)},P=_(""),y=_(":dels"),{type:m}=u;let[w,I]="deleteRange"===u.type?[u.range]:"delete"===u.type?[u.keys]:u.values.length<50?[[],u.values]:[];const k=u.trans._cache;return o.mutate(u).then(C=>{if(b(w)){"delete"!==m&&(w=C.results),P.addKeys(w);const O=Tr(w,k);O||"add"===m||y.addKeys(w),(O||I)&&(Z=_,q=O,Y=I,a.indexes.forEach(function at(et){const G=Z(et.name||"");function tn(st){return null!=st?et.extractKey(st):null}const nn=st=>et.multiEntry&&b(st)?st.forEach($t=>G.addKey($t)):G.addKey(st);(q||Y).forEach((st,$t)=>{const Mn=q&&tn(q[$t]),Ve=Y&&tn(Y[$t]);0!==it(Mn,Ve)&&(null!=Mn&&nn(Mn),null!=Ve&&nn(Ve))})}))}else if(w){const O={from:w.lower,to:w.upper};y.add(O),P.add(O)}else P.add(e),y.add(e),a.indexes.forEach(O=>_(O.name).add(e));var Z,q,Y;return C})}},d=({query:{index:u,range:f}})=>{var v,_;return[u,new Ct(null!==(v=f.lower)&&void 0!==v?v:n.MIN_KEY,null!==(_=f.upper)&&void 0!==_?_:n.MAX_KEY)]},h={get:u=>[s,new Ct(u.key)],getMany:u=>[s,(new Ct).addKeys(u.keys)],count:d,query:d,openCursor:d};return p(h).forEach(u=>{g[u]=function(f){const{subscr:v}=A;if(v){const _=I=>{const k=`idb://${t}/${r}/${I}`;return v[k]||(v[k]=new Ct)},P=_(""),y=_(":dels"),[m,w]=h[u](f);if(_(m.name||"").add(w),!m.isPrimaryKey){if("count"!==u){const I="query"===u&&c&&f.values&&o.query({...f,values:!1});return o[u].apply(this,arguments).then(k=>{if("query"===u){if(c&&f.values)return I.then(({result:O})=>(P.addKeys(O),k));const C=f.values?k.result.map(l):k.result;f.values?P.addKeys(C):y.addKeys(C)}else if("openCursor"===u){const C=k,O=f.values;return C&&Object.create(C,{key:{get:()=>(y.addKey(C.primaryKey),C.key)},primaryKey:{get(){const Z=C.primaryKey;return y.addKey(Z),Z}},value:{get:()=>(O&&P.addKey(C.primaryKey),C.value)}})}return k})}y.add(e)}}return o[u].apply(this,arguments)}}),g}}}};class qt{constructor(t,e){this._middlewares={},this.verno=0;const r=qt.dependencies;this._options=e={addons:qt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...e},this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange};const{addons:o}=e;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:N,dbReadyPromise:null,cancelOpen:N,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s,l;a.dbReadyPromise=new M(l=>{a.dbReadyResolve=l}),a.openCanceller=new M((l,c)=>{a.cancelOpen=c}),this._state=a,this.name=t,this.on=yn(this,"populate","blocked","versionchange","close",{ready:[_e,N]}),this.on.ready.subscribe=jn(this.on.ready.subscribe,l=>(c,g)=>{qt.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||M.resolve().then(c),g&&l(c);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(c),g&&l(c);else{l(c);const h=this;g||l(function u(){h.on.ready.unsubscribe(c),h.on.ready.unsubscribe(u)})}})}),this.Collection=(s=this,_n(to.prototype,function(l,c){this.db=s;let g=mr,d=null;if(c)try{g=c()}catch(v){d=v}const h=l._ctx,u=h.table,f=u.hook.reading.fire;this._ctx={table:u,index:h.index,isPrimKey:!h.index||u.schema.primKey.keyPath&&h.index===u.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:h.or,valueMapper:f!==un?f:null}})),this.Table=(l=this,_n(Xr.prototype,function(c,g,d){this.db=l,this._tx=d,this.name=c,this.schema=g,this.hook=l._allTables[c]?l._allTables[c].hook:yn(null,{creating:[Lr,N],reading:[Fr,un],updating:[qr,N],deleting:[Nr,N]})})),this.Transaction=function(l){return _n(oo.prototype,function(c,g,d,h,u){this.db=l,this.mode=c,this.storeNames=g,this.schema=d,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=yn(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M((f,v)=>{this._resolve=f,this._reject=v}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},f=>{var v=this.active;return this.active=!1,this.on.error.fire(f),this.parent?this.parent._reject(f):v&&this.idbtrans&&this.idbtrans.abort(),H(f)})})}(this),this.Version=function(l){return _n(lo.prototype,function(c){this.db=l,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return _n(xr.prototype,function(c,g,d){this.db=l,this._ctx={table:c,index:":id"===g?null:g,or:d};const h=l._deps.indexedDB;if(!h)throw new K.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(u,f)=>h.cmp(f,u),this._max=(u,f)=>h.cmp(u,f)>0?u:f,this._min=(u,f)=>h.cmp(u,f)<0?u:f,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=vn(e.IDBKeyRange),this._createTransaction=(l,c,g,d)=>new this.Transaction(l,c,g,this._options.chromeTransactionDurability,d),this._fireOnBlocked=l=>{this.on("blocked").fire(l),mn.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(l))},this.use(po),this.use(fo),this.use(_o),this.use(mo),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new K.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const e=this._versions;var r=e.filter(o=>o._cfg.version===t)[0];return r||(r=new this.Version(t),e.push(r),e.sort(so),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?t():new M((e,r)=>{if(this._state.openComplete)return r(new K.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new K.DatabaseClosed);this.open().catch(N)}this._state.dbReadyPromise.then(e,r)}).then(t)}use({stack:t,create:e,level:r,name:o}){o&&this.unuse({stack:t,name:o});const a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:e,level:null==r?10:r,name:o}),a.sort((s,l)=>s.level-l.level),this}unuse({stack:t,name:e,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(o=>r?o.create!==r:!!e&&o.name!==e)),this}open(){return function ho(n){const t=n._state,{indexedDB:e}=n._deps;if(t.isBeingOpened||n.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?H(t.dbOpenError):n);F&&(t.openCanceller._stackHolder=tt()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,s=null,l=!1;return M.race([r,(typeof navigator>"u"?M.resolve():uo()).then(()=>new M((c,g)=>{if(o(),!e)throw new K.MissingAPI;const d=n.name,h=t.autoSchema?e.open(d):e.open(d,Math.round(10*n.verno));if(!h)throw new K.MissingAPI;h.onerror=_t(g),h.onblocked=$(n._fireOnBlocked),h.onupgradeneeded=$(u=>{if(s=h.transaction,t.autoSchema&&!n._options.allowEmptyDB){h.onerror=bn,s.abort(),h.result.close();const v=e.deleteDatabase(d);v.onsuccess=v.onerror=$(()=>{g(new K.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=_t(g);var f=u.oldVersion>Math.pow(2,62)?0:u.oldVersion;l=f<1,n._novip.idbdb=h.result,function co(n,t,e,r){const o=n._dbSchema,a=n._createTransaction("readwrite",n._storeNames,o);a.create(e),a._completion.catch(r);const s=a._reject.bind(a),l=A.transless||A;Et(()=>{A.trans=a,A.transless=l,0===t?(p(o).forEach(c=>{Ue(e,c,o[c].primKey,o[c].indexes)}),De(n,e),M.follow(()=>n.on.populate.fire(a)).catch(s)):function({_novip:c},g,d,h){const u=[],f=c._versions;let v=c._dbSchema=Le(0,c.idbdb,h),_=!1;return f.filter(y=>y._cfg.version>=g).forEach(y=>{u.push(()=>{const m=v,w=y._cfg.dbschema;Ne(c,m,h),Ne(c,w,h),v=c._dbSchema=w;const I=Mr(m,w);I.add.forEach(C=>{Ue(h,C[0],C[1].primKey,C[1].indexes)}),I.change.forEach(C=>{if(C.recreate)throw new K.Upgrade("Not yet support for changing primary key");{const O=h.objectStore(C.name);C.add.forEach(Z=>Fe(O,Z)),C.change.forEach(Z=>{O.deleteIndex(Z.name),Fe(O,Z)}),C.del.forEach(Z=>O.deleteIndex(Z))}});const k=y._cfg.contentUpgrade;if(k&&y._cfg.version>g){De(c,h),d._memoizedTables={},_=!0;let C=Bn(w);I.del.forEach(q=>{C[q]=m[q]}),Re(c,[c.Transaction.prototype]),ne(c,[c.Transaction.prototype],p(C),C),d.schema=C;const O=Dt(k);let Z;O&&Jt();const E=M.follow(()=>{if(Z=k(d),Z&&O){var q=Pt.bind(null,null);Z.then(q,q)}});return Z&&"function"==typeof Z.then?M.resolve(Z):E.then(()=>Z)}}),u.push(m=>{var w,I;(!_||!Hr)&&(w=y._cfg.dbschema,[].slice.call((I=m).db.objectStoreNames).forEach(k=>null==w[k]&&I.db.deleteObjectStore(k))),Re(c,[c.Transaction.prototype]),ne(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),d.schema=c._dbSchema})}),function P(){return u.length?M.resolve(u.shift()(d.idbtrans)).then(P):M.resolve()}().then(()=>{var y,m;m=h,p(y=v).forEach(w=>{m.db.objectStoreNames.contains(w)||Ue(m,w,y[w].primKey,y[w].indexes)})})}(n,t,a,e).catch(s)})}(n,f/10,s,g)}},g),h.onsuccess=$(()=>{s=null;const u=n._novip.idbdb=h.result,f=Yt(u.objectStoreNames);if(f.length>0)try{const _=u.transaction(1===(v=f).length?v[0]:v,"readonly");t.autoSchema?function({_novip:P},y,m){P.verno=y.version/10;const w=P._dbSchema=Le(0,y,m);P._storeNames=Yt(y.objectStoreNames,0),ne(P,[P._allTables],p(w),w)}(n,u,_):(Ne(n,n._dbSchema,_),function(P,y){const m=Mr(Le(0,P.idbdb,y),P._dbSchema);return!(m.add.length||m.change.some(w=>w.add.length||w.change.length))}(n,_)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),De(n,_)}catch(_){}var v;mn.push(n),u.onversionchange=$(_=>{t.vcFired=!0,n.on("versionchange").fire(_)}),u.onclose=$(_=>{n.on("close").fire(_)}),l&&function({indexedDB:_,IDBKeyRange:P},y){!ze(_)&&"__dbnames"!==y&&qe(_,P).put({name:y}).catch(N)}(n._deps,d),c()},g)}))]).then(()=>(o(),t.onReadyBeingFired=[],M.resolve($e(()=>n.on.ready.fire(n.vip))).then(function c(){if(t.onReadyBeingFired.length>0){let g=t.onReadyBeingFired.reduce(_e,N);return t.onReadyBeingFired=[],M.resolve($e(()=>g(n.vip))).then(c)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>n).catch(c=>{t.dbOpenError=c;try{s&&s.abort()}catch(g){}return r===t.openCanceller&&n._close(),H(c)}).finally(()=>{t.openComplete=!0,a()})}(this)}_close(){const t=this._state,e=mn.indexOf(this);if(e>=0&&mn.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(r){}this._novip.idbdb=null}t.dbReadyPromise=new M(r=>{t.dbReadyResolve=r}),t.openCanceller=new M((r,o)=>{t.cancelOpen=o})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new K.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,e=this._state;return new M((r,o)=>{const a=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=$(()=>{(function({indexedDB:l,IDBKeyRange:c},g){!ze(l)&&"__dbnames"!==g&&qe(l,c).delete(g).catch(N)})(this._deps,this.name),r()}),s.onerror=_t(o),s.onblocked=this._fireOnBlocked};if(t)throw new K.InvalidArgument("Arguments not allowed in db.delete()");e.isBeingOpened?e.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return p(this._allTables).map(t=>this._allTables[t])}transaction(){const t=go.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,e,r){let o=A.trans;o&&o.db===this&&-1===t.indexOf("!")||(o=null);const a=-1!==t.indexOf("?");let s,l;t=t.replace("!","").replace("?","");try{if(l=e.map(g=>{var d=g instanceof this.Table?g.name:g;if("string"!=typeof d)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),"r"==t||"readonly"===t)s="readonly";else{if("rw"!=t&&"readwrite"!=t)throw new K.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(o){if("readonly"===o.mode&&"readwrite"===s){if(!a)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&l.forEach(g=>{if(o&&-1===o.storeNames.indexOf(g)){if(!a)throw new K.SubTransaction("Table "+g+" not included in parent transaction.");o=null}}),a&&o&&!o.active&&(o=null)}}catch(g){return o?o._promise(null,(d,h)=>{h(g)}):H(g)}const c=kr.bind(null,this,s,l,o,r);return o?o._promise(s,c,"lock"):A.trans?Ht(A.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!D(this._allTables,t))throw new K.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const bo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class vo{constructor(t){this._subscribe=t}subscribe(t,e,r){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:r})}[bo](){return this}}function Ar(n,t){return p(t).forEach(e=>{re(n[e]||(n[e]=new Ct),t[e])}),n}let Je;try{Je={indexedDB:x.indexedDB||x.mozIndexedDB||x.webkitIndexedDB||x.msIndexedDB,IDBKeyRange:x.IDBKeyRange||x.webkitIDBKeyRange}}catch(n){Je={indexedDB:null,IDBKeyRange:null}}const zt=qt;function oe(n){let t=wt;try{wt=!0,St.storagemutated.fire(n)}finally{wt=t}}j(zt,{...Rn,delete:n=>new zt(n,{addons:[]}).delete(),exists:n=>new zt(n,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(n){try{return function({indexedDB:t,IDBKeyRange:e}){return ze(t)?Promise.resolve(t.databases()).then(r=>r.map(o=>o.name).filter(o=>"__dbnames"!==o)):qe(t,e).toCollection().primaryKeys()}(zt.dependencies).then(n)}catch(t){return H(new K.MissingAPI)}},defineClass:()=>function(n){T(this,n)},ignoreTransaction:n=>A.trans?Ht(A.transless,n):n(),vip:$e,async:function(n){return function(){try{var t=Qe(n.apply(this,arguments));return t&&"function"==typeof t.then?t:M.resolve(t)}catch(e){return H(e)}}},spawn:function(n,t,e){try{var r=Qe(n.apply(e,t||[]));return r&&"function"==typeof r.then?r:M.resolve(r)}catch(o){return H(o)}},currentTransaction:{get:()=>A.trans||null},waitFor:function(n,t){const e=M.resolve("function"==typeof n?zt.ignoreTransaction(n):n).timeout(t||6e4);return A.trans?A.trans.waitFor(e):e},Promise:M,debug:{get:()=>F,set:n=>{V(n,"dexie"===n?()=>!0:fr)}},derive:gt,extend:T,props:j,override:jn,Events:yn,on:St,liveQuery:function Po(n){return new vo(t=>{const e=Dt(n);let r=!1,o={},a={};const s={get closed(){return r},unsubscribe:()=>{r=!0,St.storagemutated.unsubscribe(d)}};t.start&&t.start(s);let l=!1,c=!1;function g(){return p(a).some(u=>o[u]&&function yo(n,t){const e=Ge(t);let r=e.next();if(r.done)return!1;let o=r.value;const a=Ge(n);let s=a.next(o.from),l=s.value;for(;!r.done&&!s.done;){if(it(l.from,o.to)<=0&&it(l.to,o.from)>=0)return!0;it(o.from,l.from)<0?o=(r=e.next(l.from)).value:l=(s=a.next(o.from)).value}return!1}(o[u],a[u]))}const d=u=>{Ar(o,u),g()&&h()},h=()=>{if(l||r)return;o={};const u={},f=function(v){e&&Jt();const _=()=>Et(n,{subscr:v,trans:null}),P=A.trans?Ht(A.transless,_):_();return e&&P.then(Pt,Pt),P}(u);c||(St("storagemutated",d),c=!0),l=!0,Promise.resolve(f).then(v=>{l=!1,r||(g()?h():(o={},a=u,t.next&&t.next(v)))},v=>{l=!1,t.error&&t.error(v),s.unsubscribe()})};return h(),s})},extendObservabilitySet:Ar,getByKeyPath:pt,setByKeyPath:rt,delByKeyPath:function(n,t){"string"==typeof t?rt(n,t,void 0):"length"in t&&[].map.call(t,function(e){rt(n,e,void 0)})},shallowClone:Bn,deepClone:dt,getObjectDiff:Ye,cmp:it,asap:sn,minKey:-1/0,addons:[],connections:mn,errnames:ye,dependencies:Je,semVer:"3.2.2",version:"3.2.2".split(".").map(n=>parseInt(n)).reduce((n,t,e)=>n+t/Math.pow(10,2*e))}),zt.maxKey=vn(zt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(St("storagemutated",n=>{if(!wt){let t;Jn?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,n)):t=new CustomEvent("x-storagemutated-1",{detail:n}),wt=!0,dispatchEvent(t),wt=!1}}),addEventListener("x-storagemutated-1",({detail:n})=>{wt||oe(n)}));let wt=!1;if(typeof BroadcastChannel<"u"){const n=new BroadcastChannel("x-storagemutated-1");St("storagemutated",t=>{wt||n.postMessage(t)}),n.onmessage=t=>{t.data&&oe(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){St("storagemutated",t=>{try{wt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(e=>e.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch(e){}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if("x-storagemutated-1"===t.key){const e=JSON.parse(t.newValue);e&&oe(e.changedParts)}});const n=self.document&&navigator.serviceWorker;n&&n.addEventListener("message",function({data:t}){t&&"x-storagemutated-1"===t.type&&oe(t.changedParts)})}M.rejectionMapper=function(n,t){if(!n||n instanceof Wt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!or[n.name])return n;var e=new or[n.name](t||n.message,n);return"stack"in n&&U(e,"stack",{get:function(){return this.inner.stack}}),e},V(F,fr);const Ot=new class xo extends qt{constructor(){super("ImageDB"),this.version(1).stores({images:"&url"}),this.images.mapToClass(Sn)}};function He(n){return Ot.images.where("url").equals(n).toArray()}var Sr=L(1481);let wo=(()=>{class n{constructor(e,r){this.sanitizer=e,this.httpClient=r}getCSSBackgroundImageURL(e){return(0,ht.mG)(this,void 0,void 0,function*(){let r=yield He(e);if(0==r.length)return`url('${e}')`;const o=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r[0].data));return this.getSafeBackgroundImageUrl(o)})}getSafeBackgroundImageUrl(e){return`url("${e.changingThisBreaksApplicationSecurity}")`}fetchImage(e){return this.httpClient.get(e,{responseType:"blob"})}saveImageToDatabase(e,r){return(0,ht.mG)(this,void 0,void 0,function*(){0==(yield He(e)).length&&function Co(n){Ot.images.put(n)}(new Sn(e,r,r.type))})}getSafeImageUrl(e){return e.changingThisBreaksApplicationSecurity}getImageByURL(e=""){return(0,ht.mG)(this,void 0,void 0,function*(){let r=yield He(e).then().catch(o=>(console.log(o,"error get image"),o));if(0==(null==r?void 0:r.length)){let o=this.formatUrlSubdomain(e);return this.fetchImage(o).toPromise().then(a=>(console.log(a),this.saveImageToDatabase(e,e),a)).catch(a=>{throw console.log(a,"error get hhtp image"),Error("error get hhtp image")})}return r[0].data})}formatUrlSubdomain(e){let r=e;if(e.includes("https://s3")){let o=e.split("/"),a=o.splice(3,1);o=o.join("/").split("//"),r=`https://${a}.${o[1]}`}return r}}return n.\u0275fac=function(e){return new(e||n)(i.LFG(Sr.H7),i.LFG(In.eN))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ie=L(8798);function Oo(n,t){if(1&n&&i._UZ(0,"img",3),2&n){const e=i.oxw();i.Q6J("defaultImage","assets/icon/favicon.png")("lazyLoad",e._src)("ngClass",e.fitting)}}function Mo(n,t){if(1&n&&i._UZ(0,"img",4),2&n){const e=i.oxw();i.Q6J("src",e._src,i.LSH)("ngClass",e.fitting)}}function ko(n,t){1&n&&(i.TgZ(0,"div",7),i._UZ(1,"ion-spinner",8),i.qZA())}function To(n,t){1&n&&(i.TgZ(0,"div"),i._UZ(1,"ion-skeleton-text",9),i.qZA())}function Eo(n,t){if(1&n&&(i.YNc(0,ko,2,0,"div",5),i.YNc(1,To,2,0,"div",6)),2&n){const e=i.oxw();i.Q6J("ngIf",e.spinner),i.xp6(1),i.Q6J("ngIf",!e.spinner)}}let Io=(()=>{class n{constructor(e,r){this.imgService=e,this.sanitizer=r,this.spinner=!1,this.fitting="contain",this.lazyLoading=!0}ngOnInit(){this._src=this.src}storeImage(e,r){return(0,ht.mG)(this,void 0,void 0,function*(){const a=yield(yield fetch(e)).blob(),s=yield this.convertBlobToBase64(a);return yield ge.writeFile({directory:an.Cache,path:`${de.ah}/${r}`,data:s}).then(c=>console.log(c)).catch(c=>console.error(c))})}convertBlobToBase64(e){return new Promise((r,o)=>{const a=new FileReader;a.onerror=o,a.onload=()=>{r(a.result)},a.readAsDataURL(e)})}getSafeImageUrl(e){return e.changingThisBreaksApplicationSecurity}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(wo),i.Y36(Sr.H7))},n.\u0275cmp=i.Xpm({type:n,selectors:[["img-cache"]],inputs:{spinner:"spinner",src:"src",fitting:"fitting",lazyLoading:"lazyLoading"},decls:4,vars:2,consts:[[3,"defaultImage","lazyLoad","ngClass",4,"ngIf"],[3,"src","ngClass",4,"ngIf"],["loading",""],[3,"defaultImage","lazyLoad","ngClass"],[3,"src","ngClass"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center"],["name","crescent","color","primary"],["animated","",2,"width","54px","height","54px","margin","auto"]],template:function(e,r){1&e&&(i.YNc(0,Oo,1,3,"img",0),i.YNc(1,Mo,1,2,"img",1),i.YNc(2,Eo,2,2,"ng-template",null,2,i.W1O)),2&e&&(i.Q6J("ngIf",r.lazyLoading),i.xp6(1),i.Q6J("ngIf",!r.lazyLoading))},dependencies:[R.mk,R.O5,z.CK,z.PQ,ie.z1],styles:["img[_ngcontent-%COMP%]{display:block;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.contain[_ngcontent-%COMP%]{object-fit:contain}.cover[_ngcontent-%COMP%]{object-fit:cover}"]}),n})();function Ao(n,t){if(1&n&&(i.TgZ(0,"ion-button",20),i._UZ(1,"ion-icon",21),i.qZA()),2&n){const e=i.oxw(3);i.MGl("id","price-info-",e.product.id,"")}}function So(n,t){if(1&n&&(i.TgZ(0,"div",22),i._uU(1),i.qZA()),2&n){const e=i.oxw(3);i.xp6(1),i.hij("",e.product.discountPercentage,"%")}}function jo(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",23),i._uU(2),i.qZA(),i.BQk()),2&n){const e=i.oxw(3);i.xp6(2),i.Oqu(e.price)}}const jr=function(){return{activated:!1}},Kr=function(n,t){return{"min-height":n,width:t}};function Ko(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"div",4)(2,"div",5),i._UZ(3,"img-cache",6),i.YNc(4,Ao,2,1,"ion-button",7),i.qZA(),i.TgZ(5,"div",8)(6,"span",9),i._uU(7),i.qZA(),i.TgZ(8,"div",10)(9,"div",11),i._uU(10),i.qZA()()(),i.TgZ(11,"div",12)(12,"div",13),i.YNc(13,So,2,1,"div",14),i.YNc(14,jo,3,1,"ng-container",3),i.TgZ(15,"span",15),i._uU(16),i.qZA(),i.TgZ(17,"span",16),i._UZ(18,"ion-icon",17),i._uU(19),i.qZA()(),i.TgZ(20,"div",18)(21,"ion-button",19),i._uU(22," + Keranjang "),i.qZA()()()(),i.BQk()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngClass",i.DdM(11,jr))("ngStyle",i.WLB(12,Kr,e.minHeight,e.width)),i.xp6(2),i.Q6J("src",e.product.thumbnail),i.xp6(1),i.Q6J("ngIf",e.product.id&&!0!==e.hidePriceInfo),i.xp6(3),i.hij(" ",e.product.title," "),i.xp6(3),i.Oqu(e.product.category),i.xp6(3),i.Q6J("ngIf",e.product.discountPercentage>0),i.xp6(1),i.Q6J("ngIf",e.product.discountPercentage>0),i.xp6(2),i.Oqu(e.discount),i.xp6(3),i.AsE(" ",e.product.rating," | stok : ",e.product.stock," ")}}function Bo(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"div",24)(2,"div",5),i._UZ(3,"ion-skeleton-text",25),i.qZA(),i.TgZ(4,"div",8)(5,"span",9),i._UZ(6,"ion-skeleton-text",25)(7,"ion-skeleton-text",25),i.qZA(),i.TgZ(8,"div",10),i._UZ(9,"ion-skeleton-text",25),i.qZA()(),i.TgZ(10,"div",12),i._UZ(11,"ion-skeleton-text",25)(12,"ion-skeleton-text",25),i.qZA()(),i.BQk()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngStyle",i.WLB(3,Kr,e.minHeight,e.width)),i.xp6(8),i.Udp("width","30px")}}function Zo(n,t){if(1&n&&(i.TgZ(0,"div",2),i.YNc(1,Ko,23,15,"ng-container",3),i.YNc(2,Bo,13,6,"ng-container",3),i.qZA()),2&n){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",!e.isLoading),i.xp6(1),i.Q6J("ngIf",e.isLoading)}}function Do(n,t){if(1&n&&(i.TgZ(0,"div",22),i._uU(1),i.qZA()),2&n){const e=i.oxw(3);i.xp6(1),i.hij("",e.product.discountPercentage,"%")}}function Ro(n,t){1&n&&i._UZ(0,"ion-img",38)}function Uo(n,t){if(1&n&&(i.TgZ(0,"ion-button",39),i._UZ(1,"ion-icon",21),i._uU(2," \xa0\xa0Favorit "),i.qZA()),2&n){const e=i.oxw(3);i.MGl("id","price-info-",e.product.id,"")}}function Fo(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",23),i._uU(2),i.qZA(),i.BQk()),2&n){const e=i.oxw(3);i.xp6(2),i.Oqu(e.price)}}function Lo(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"div",27)(2,"div",8),i.YNc(3,Do,2,1,"div",14),i.TgZ(4,"div",28),i._UZ(5,"img",29),i.qZA(),i.TgZ(6,"div",30)(7,"div",31),i.YNc(8,Ro,1,0,"ion-img",32),i.qZA(),i.TgZ(9,"span",9),i._uU(10),i.qZA(),i.TgZ(11,"div",10)(12,"div",11),i._uU(13),i.qZA()()()(),i.TgZ(14,"div",12),i.YNc(15,Uo,3,1,"ion-button",33),i.TgZ(16,"div",34),i.YNc(17,Fo,3,1,"ng-container",3),i.TgZ(18,"span",35),i._uU(19),i.qZA(),i.TgZ(20,"span",16),i._UZ(21,"ion-icon",17),i._uU(22),i.qZA()()(),i.TgZ(23,"div",12),i._UZ(24,"div",36),i.TgZ(25,"ion-button",37),i._uU(26," + Keranjang "),i.qZA()()(),i.BQk()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngClass",i.DdM(12,jr)),i.xp6(2),i.Q6J("ngIf",e.product.discountPercentage>0),i.xp6(2),i.Q6J("defaultImage","assets/icon/favicon.png")("lazyLoad",e.product.thumbnail),i.xp6(3),i.Q6J("ngIf",1===e.product.pin),i.xp6(2),i.Oqu(e.product.title),i.xp6(3),i.Oqu(e.product.category),i.xp6(2),i.Q6J("ngIf",e.product.id),i.xp6(2),i.Q6J("ngIf",e.product.discountPercentage>0),i.xp6(2),i.Oqu(e.discount),i.xp6(3),i.AsE(" ",e.product.rating," | stok : ",e.product.stock," ")}}function No(n,t){1&n&&(i.ynx(0),i.TgZ(1,"div",40)(2,"div",8)(3,"div",28),i._UZ(4,"ion-skeleton-text",25),i.qZA(),i.TgZ(5,"div",30)(6,"span",9),i._UZ(7,"ion-skeleton-text",25)(8,"ion-skeleton-text",25),i.qZA(),i.TgZ(9,"div",10),i._UZ(10,"ion-skeleton-text",25),i.qZA()()(),i.TgZ(11,"div",12),i._UZ(12,"div",36)(13,"ion-skeleton-text",25),i.TgZ(14,"div",34),i._UZ(15,"ion-skeleton-text",25)(16,"ion-skeleton-text",25),i.qZA()()(),i.BQk()),2&n&&(i.xp6(10),i.Udp("width","30px"))}function qo(n,t){if(1&n&&(i.TgZ(0,"div",26),i.YNc(1,Lo,27,13,"ng-container",3),i.YNc(2,No,17,2,"ng-container",3),i.qZA()),2&n){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",!e.isLoading),i.xp6(1),i.Q6J("ngIf",e.isLoading)}}var Cn=(()=>{return(n=Cn||(Cn={})).grid="grid",n.list="list",Cn;var n})();let zo=(()=>{class n{constructor(e,r,o){this.modalCtrl=e,this.rupiah=r,this.router=o,this.hidePriceInfo=null,this.minHeight=null,this.width=null,this.isLoading=!1,this.showPriceInfo=new i.vpe,this.cardTypeValue=Cn}ngOnInit(){var e;this.cardType=null!==(e=this.cardType)&&void 0!==e?e:Cn.grid}onClickPriceInfo(){}get price(){var e;return null===(e=this.rupiah)||void 0===e?void 0:e.transform(this.product.price)}get discount(){var e;return null===(e=this.rupiah)||void 0===e?void 0:e.transform(this.product.discountPercentage/100*this.product.price)}addingToCart(){return(0,ht.mG)(this,void 0,void 0,function*(){})}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(z.IN),i.Y36(on),i.Y36(Qt.F0))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-product-card"]],inputs:{cardType:"cardType",product:"product",hidePriceInfo:"hidePriceInfo",minHeight:"minHeight",width:"width",isLoading:"isLoading"},outputs:{showPriceInfo:"showPriceInfo"},features:[i._Bn([on])],decls:2,vars:2,consts:[["class","layout-grid",4,"ngIf"],["class","layout-list",4,"ngIf"],[1,"layout-grid"],[4,"ngIf"],[1,"product",3,"ngClass","ngStyle"],[1,"header"],[1,"img",3,"src"],["fill","clear",3,"id",4,"ngIf"],[1,"content"],[1,"title"],[1,"unit-content"],[1,"unit"],[1,"footer"],[1,"section-price"],["class","discount-tag",4,"ngIf"],[1,"price"],[1,"label"],["name","star"],[1,"section-button"],["fill","outline",1,"order"],["fill","clear",3,"id"],["name","heart"],[1,"discount-tag"],[1,"label","through"],[1,"product",3,"ngStyle"],["animated",""],[1,"layout-list"],[1,"product",3,"ngClass"],[1,"image-content"],["alt","logo",3,"defaultImage","lazyLoad"],[1,"info-content"],[1,"product-card-flagicon-wrapper","list"],["class","crown-icon","src","./assets/icons/crown-icon.svg",4,"ngIf"],["fill","outline","class","price-info",3,"id",4,"ngIf"],[1,"price-content"],[1,"nominal"],[1,"line"],["fill","outline","shape","round","expand","block",1,"order-button"],["src","./assets/icons/crown-icon.svg",1,"crown-icon"],["fill","outline",1,"price-info",3,"id"],[1,"product"]],template:function(e,r){1&e&&(i.YNc(0,Zo,3,2,"div",0),i.YNc(1,qo,3,2,"div",1)),2&e&&(i.Q6J("ngIf",r.cardType===r.cardTypeValue.grid),i.xp6(1),i.Q6J("ngIf",r.cardType===r.cardTypeValue.list))},dependencies:[R.mk,R.O5,R.PC,z.YG,z.gu,z.Xz,z.CK,Io,ie.z1],styles:[".layout-grid[_ngcontent-%COMP%]{height:100%}.layout-grid[_ngcontent-%COMP%]   .product.activated[_ngcontent-%COMP%]{border:1px solid #406ae2;border-radius:10px}.layout-grid[_ngcontent-%COMP%]   .product.disabled[_ngcontent-%COMP%]{opacity:.5}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{width:inherit;height:inherit;background:#ffffff;box-shadow:0 0 12px rgba(0,0,0,.08);border-radius:10px;display:flex;flex-direction:column;justify-content:space-between;position:relative;min-width:140px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%;height:90px;display:flex;justify-content:center;align-items:center;position:relative;margin-top:4px;margin-bottom:4px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .sold-out[_ngcontent-%COMP%]{width:60px;height:14px;background:#000000;mix-blend-mode:normal;border-radius:4px;position:absolute;font-weight:600;font-size:10px;line-height:12px;text-align:center;color:#fff}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:84px;width:84px;object-fit:contain;display:flex;align-items:center;justify-content:center}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:84px;width:84px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 5px;--padding-end: 5px;--padding-top: 5px;--padding-bottom: 5px;position:absolute;top:0;right:3px;color:var(--ion-color-medium-shade)}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 150px);display:flex;flex-direction:column;padding:0 12px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:18px;max-height:36px;color:var(--ion-color-dark);height:36px;text-overflow:ellipsis;overflow:hidden;display:-webkit-box!important;-webkit-line-clamp:2!important;-webkit-box-orient:vertical!important;margin-bottom:4px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:6px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(1){width:100%}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(2){width:60%}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;flex-wrap:wrap;margin-bottom:4px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:15px;margin-right:4px;margin-bottom:0}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]   .unit.activated[_ngcontent-%COMP%]{border:1px solid #406ae2;background:#e9efff;color:#406ae2}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{background:var(--ion-color-primary);box-sizing:border-box;border-radius:4px;font-size:10px;color:#fff;font-weight:600;line-height:12px;padding:4px 8px;margin-right:4px;margin-top:4px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{width:100%;min-height:104px;border-top:1px solid #f5f5f5;padding:8px 12px 0;display:flex;flex-direction:column;justify-content:flex-start;position:relative}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{align-items:flex-end;flex-direction:column;display:flex}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%] > div.section-button[_ngcontent-%COMP%]{align-items:stretch}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%] > div.section-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:16px 0 0;border-radius:8px;--border-radius: 8px;height:33px;font-size:14px;font-weight:700}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:var(--ion-color-medium)}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .label.through[_ngcontent-%COMP%]{text-decoration:line-through}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .discount-tag[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:#fc7171;border-radius:0 0 10px;padding:4px 12px;color:#fff;font-weight:700;font-size:10px;line-height:12px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-top:4px;font-weight:700;font-size:12px;line-height:14px;color:#406ae2;text-align:right;max-height:14px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:8px}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(1){width:40%}.layout-grid[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(2){width:60%}.layout-list[_ngcontent-%COMP%]{margin-bottom:8px}.layout-list[_ngcontent-%COMP%]   .product.activated[_ngcontent-%COMP%]{border:1px solid #406ae2;border-radius:10px}.layout-list[_ngcontent-%COMP%]   .product.disabled[_ngcontent-%COMP%]{opacity:.5}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{width:100%;min-height:156px;background:#ffffff;box-shadow:0 2px 4px rgba(0,0,0,.1);border-radius:10px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;min-height:96px;display:flex;position:relative}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .discount-tag[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:#fc7171;border-radius:10px 0;padding:4px 12px;color:#fff;font-weight:700;font-size:10px;line-height:12px;z-index:1}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .image-content[_ngcontent-%COMP%]{min-height:64px;width:64px;margin:16px;display:flex;align-items:center;justify-content:center;position:relative}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .image-content[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:64px;width:64px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .image-content[_ngcontent-%COMP%]   .sold-out[_ngcontent-%COMP%]{width:60px;height:14px;background:#000000;mix-blend-mode:normal;border-radius:4px;position:absolute;font-weight:600;font-size:10px;line-height:12px;text-align:center;color:#fff}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .image-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;object-fit:contain}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{width:calc(100% - 112px);position:relative;display:flex;flex-direction:column;justify-content:space-around;margin:16px 16px 16px 0}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:18px;max-height:36px;min-height:18px;color:var(--ion-color-dark);display:-webkit-box!important;-webkit-line-clamp:2!important;-webkit-box-orient:vertical!important;margin-bottom:8px;margin-right:28px;overflow:hidden;text-overflow:ellipsis}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:6px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(1){width:100%}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(2){width:60%}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;flex-wrap:wrap}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]   .unit.activated[_ngcontent-%COMP%]{border:1px solid #406ae2;background:#e9efff;color:#406ae2}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{background:var(--ion-color-primary);box-sizing:border-box;border-radius:4px;font-size:10px;color:#fff;font-weight:600;line-height:12px;padding:4px 8px;margin-right:4px;margin-top:4px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .unit-content[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:15px;margin-right:4px;margin-bottom:0}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{width:100%;padding:0 16px;position:relative;display:flex;justify-content:space-between;align-items:center}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]:not(:first-child){margin-top:8px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:calc(100% - 32px);position:absolute;top:0;border-top:1px solid var(--ion-color-medium-tint)}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{border-radius:8px;width:95px;height:28px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-button.price-info[_ngcontent-%COMP%]{margin:0;min-height:28px;--padding-start: 12px;--padding-end: 12px;--padding-bottom: 0;--padding-top: 0;--border-radius: 8px;--border-width: 1px;--border-style: solid;--border-color: #d2d2d2;--color: var(--ion-color-dark);text-transform:none;font-size:12px;line-height:14px}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   ion-button.order-button[_ngcontent-%COMP%]{margin:8px 0 16px;border-radius:8px;--border-radius: 8px;height:33px;width:100%;font-size:14px;font-weight:700}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;justify-content:center;height:100%;width:80%}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(1){height:6px;width:30%}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:nth-child(2){height:6px;width:70%}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:var(--ion-color-medium)}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   .label.through[_ngcontent-%COMP%]{text-decoration:line-through}.layout-list[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   .nominal[_ngcontent-%COMP%]{margin-top:4px;font-weight:700;font-size:14px;line-height:18px;color:#406ae2}.mission-icon[_ngcontent-%COMP%]{padding-left:8px;height:30px;width:44px}"]}),n})();var wn,ae;function $o(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"app-product-card",17),i.NdJ("showPriceInfo",function(){const a=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.priceInfo(a))})("click",function(){const a=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.openProductDetail(a))}),i.qZA()}if(2&n){const e=t.$implicit,r=i.oxw(3);i.Q6J("product",e)("cardType",r.layoutGrid?"grid":"list")("isLoading",!1)}}const Br=function(n,t){return{"product-layout grid":n,"layout-list":t}};function Qo(n,t){if(1&n){const e=i.EpF();i.ynx(0),i.TgZ(1,"div",11)(2,"div",12)(3,"span"),i._uU(4),i.qZA(),i.TgZ(5,"ion-button",13),i.NdJ("click",function(){i.CHM(e);const o=i.oxw(2);return i.KtG(o.layoutGrid=!o.layoutGrid)}),i._UZ(6,"ion-icon",14),i.qZA()(),i.TgZ(7,"div",15),i.YNc(8,$o,1,3,"app-product-card",16),i.qZA()(),i.BQk()}if(2&n){const e=i.oxw().ngIf,r=i.oxw();i.xp6(4),i.hij(" ",r.total," Produk ditemukan"),i.xp6(1),i.Tol(r.layoutGrid?"":"disabled"),i.xp6(2),i.Q6J("ngClass",i.WLB(5,Br,r.layoutGrid,!r.layoutGrid)),i.xp6(1),i.Q6J("ngForOf",e)}}function Yo(n,t){if(1&n&&(i.ynx(0),i.YNc(1,Qo,9,8,"ng-container",6),i.BQk()),2&n){const e=t.ngIf;i.oxw();const r=i.MAs(14);i.xp6(1),i.Q6J("ngIf",e.length>0)("ngIfElse",r)}}function Wo(n,t){1&n&&(i.TgZ(0,"div",11)(1,"div",18)(2,"div",19)(3,"ion-text",20),i._uU(4,"Barang sedang kosong!"),i.qZA(),i.TgZ(5,"ion-text",21),i._uU(6," Oops! Barang pada sedang kosong. Coba cari dengan kata kunci atau kategori lain, yuk. "),i.qZA()()()())}function Go(n,t){if(1&n&&i._UZ(0,"app-product-card",24),2&n){const e=i.oxw(2);i.Q6J("cardType",e.layoutGrid?"grid":"list")("isLoading",!0)}}const Jo=function(){return[1,2,3,4,5,6]};function Ho(n,t){if(1&n&&(i.TgZ(0,"div",11)(1,"div",12),i._UZ(2,"ion-skeleton-text",22),i.qZA(),i.TgZ(3,"div",15),i.YNc(4,Go,1,2,"app-product-card",23),i.qZA()()),2&n){const e=i.oxw();i.xp6(3),i.Q6J("ngClass",i.WLB(2,Br,e.layoutGrid,!e.layoutGrid)),i.xp6(1),i.Q6J("ngForOf",i.DdM(5,Jo))}}class On{constructor(t){this.productService=t,this.searchText=null,this.isLoading=!0,this.isScrollEnd=!1,this.layoutGrid=!0,this.page=1,this.limit=10,wn.set(this,void 0),ae.set(this,void 0),this.page$=new Tn.X({page:this.page,limit:this.limit,skip:0}),this.products$=new ce.y,this.productTrack$=new Tn.X([])}ngOnInit(){this.initProducts()}initProducts(){this.page$=new Tn.X({page:this.page,limit:this.limit,skip:0}),this.products$=this.page$.pipe((0,bt.w)(({page:t,limit:e,skip:r})=>this.loadProducts(t,e,r)),(0,en.R)((t,e)=>[...t,...e]),(0,En.b)(()=>{(0,ht.Q_)(this,wn,"f")&&(0,ht.Q_)(this,wn,"f").target.complete(),(0,ht.Q_)(this,ae,"f")&&(0,ht.Q_)(this,ae,"f").target.complete()}))}loadProducts(t,e,r){return this.productService.getProduct({page:t,limit:e,skip:r}).pipe((0,En.b)(a=>{this.total=a.total,this.isLoading=!1,a.products.length===a.total&&(this.isScrollEnd=!0),this.productTrack$.next(a.products)}),(0,le.U)(a=>a.products),(0,ue.K)(()=>(0,jt.of)([])))}loadMoreProducts(t){this.page+=1,(0,ht.YH)(this,wn,t,"f"),this.page$.next({page:this.page,limit:this.limit,skip:this.limit*this.page-this.limit})}priceInfo(t){}openProductDetail(t){}}wn=new WeakMap,ae=new WeakMap,On.\u0275fac=function(t){return new(t||On)(i.Y36(An))},On.\u0275cmp=i.Xpm({type:On,selectors:[["app-product"]],decls:17,vars:6,consts:[["color","primary",1,"ion-no-border"],["placeholder","Mau cari produk apa?","id","product-gallery-open-search","clearInput","true","slot","start",3,"searchIcon"],["slot","end"],["id","product-gallery-cart",1,"cart-button"],["mode","ios","color","danger"],["slot","icon-only","src","assets/icon/cart.svg"],[4,"ngIf","ngIfElse"],["threshold","40%",3,"disabled","ionInfinite"],["loadingSpinner","bubbles","loadingText","Tunggu sebentar..."],["emptyState",""],["loadingState",""],[1,"product-gallery"],[1,"header"],["fill","clear","id","product-gallery-layout",3,"click"],["name","grid-outline"],[3,"ngClass"],["id","product-gallery-card-product",3,"product","cardType","isLoading","showPriceInfo","click",4,"ngFor","ngForOf"],["id","product-gallery-card-product",3,"product","cardType","isLoading","showPriceInfo","click"],[1,"empty-state"],[1,"empty-state-content"],[1,"title"],[1,"description"],["animated",""],[3,"cardType","isLoading",4,"ngFor","ngForOf"],[3,"cardType","isLoading"]],template:function(t,e){if(1&t&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar"),i._UZ(2,"ion-searchbar",1),i.TgZ(3,"ion-buttons",2)(4,"ion-button",3)(5,"ion-badge",4),i._uU(6,"2"),i.qZA(),i._UZ(7,"ion-icon",5),i.qZA()()()(),i.TgZ(8,"ion-content"),i.YNc(9,Yo,2,2,"ng-container",6),i.ALo(10,"async"),i.TgZ(11,"ion-infinite-scroll",7),i.NdJ("ionInfinite",function(o){return e.loadMoreProducts(o)}),i._UZ(12,"ion-infinite-scroll-content",8),i.qZA()(),i.YNc(13,Wo,7,0,"ng-template",null,9,i.W1O),i.YNc(15,Ho,5,6,"ng-template",null,10,i.W1O)),2&t){const r=i.MAs(16);i.xp6(2),i.Q6J("searchIcon","search-sharp"),i.xp6(7),i.Q6J("ngIf",i.lcZ(10,4,e.products$))("ngIfElse",r),i.xp6(2),i.Q6J("disabled",e.isScrollEnd)}},dependencies:[zo,R.mk,R.sg,R.O5,z.yp,z.YG,z.Sm,z.W2,z.Gu,z.gu,z.ju,z.MB,z.VI,z.CK,z.yW,z.sr,z.j9,R.Ov],styles:["ion-header[_ngcontent-%COMP%]{background:#fff}ion-header[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{padding:0 10px}ion-header[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{font-family:Barlow;--min-height: 60px;--padding-end: 0;border-radius:0 0 20px 20px;--background: #54d61c}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--icon-font-size: 22px;--icon-font-weight: bold}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--placeholder-color: var(--ion-color-medium);--border-radius: 10px !important;border-radius:10px!important;height:36px;--height: 36px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:36px!important;padding-left:16px!important;box-shadow:none!important;font-size:12px!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.lg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{left:unset!important;right:16px;top:8px!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .cart-button[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{position:absolute;--padding-start: 4px;--padding-end: 4px;--padding-top: 2px;--padding-bottom: 3px;font-size:10px;line-height:8px;top:-4px;right:-4px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.searchbar-header[_ngcontent-%COMP%]{--background: #fff;--border-radius: 6px;--box-shadow: none;--placeholder-color: #a7a5a5;--placeholder-opacity: 1;-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.searchbar-header[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]{height:36px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.searchbar-header[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{font-size:12px;height:36px;-webkit-padding-start:16px!important;padding-inline-start:16px!important;-webkit-padding-end:48px;padding-inline-end:48px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.searchbar-header[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-search-icon[_ngcontent-%COMP%]{color:var(--ion-text-color);opacity:.5;left:auto;right:16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.searchbar-header[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-clear-button[_ngcontent-%COMP%]{right:16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.searchbar-header.searchbar-has-value[_ngcontent-%COMP%]   .searchbar-search-icon[_ngcontent-%COMP%]{display:none!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.outline[_ngcontent-%COMP%]{--background: var(--ion-color-primary-contrast);--border-radius: 6px;--box-shadow: none;--placeholder-color: var(--ion-color-medium);--placeholder-opacity: none;-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.outline[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]{height:38px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.outline[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium-shade);font-size:12px;height:40px;-webkit-padding-start:16px!important;padding-inline-start:16px!important;-webkit-padding-end:48px;padding-inline-end:48px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.outline[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-search-icon[_ngcontent-%COMP%]{color:var(--color);left:auto;right:16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.outline[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-clear-button[_ngcontent-%COMP%]{right:16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-searchbar.outline.searchbar-has-value[_ngcontent-%COMP%]   .searchbar-search-icon[_ngcontent-%COMP%]{display:none!important}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]{padding:16px;z-index:1}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:18px;color:var(--ion-color-dark)}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:50%;height:10px}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;--padding-top: 0;--padding-bottom: 0;--padding-start: 6px;--padding-end: 6px}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-button.disabled[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{opacity:.5}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   ion-product-card[_ngcontent-%COMP%]{margin-top:8px}ion-content[_ngcontent-%COMP%]   .product-layout[_ngcontent-%COMP%]{padding:16px}ion-content[_ngcontent-%COMP%]   .product-layout.grid[_ngcontent-%COMP%]{column-gap:8px;row-gap:8px;padding:0;width:calc(100% - 32px);display:grid;grid-column:2;grid-template-columns:calc(50vw - 20px) calc(50vw - 20px)}ion-content[_ngcontent-%COMP%]   .product-layout.grid[_ngcontent-%COMP%]   ion-product-card[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .product-layout.grid[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]{width:calc(50vw - 20px);display:inline-block;border-radius:5px;transition:all .25s ease-in-out}ion-content[_ngcontent-%COMP%]   .product-layout.list[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]   .product-layout.list[_ngcontent-%COMP%]   ion-product-card[_ngcontent-%COMP%]{margin-top:8px}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;overflow:auto}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal.section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:8px}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]   ion-product-card[_ngcontent-%COMP%]{min-width:160px;margin:16px 0 16px 16px}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]   ion-product-card[_ngcontent-%COMP%]:last-child{margin-right:16px}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]   .next-page[_ngcontent-%COMP%]{background:#ffffff;box-shadow:0 0 12px rgba(0,0,0,.08);border-radius:10px;border:1px solid var(--ion-color-primary);margin:16px;min-width:120px;display:flex;justify-content:center;align-items:center;flex-direction:column;--ripple-color: var(--ion-color-tertiary);position:relative}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]   .next-page[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--ion-color-primary)}ion-content[_ngcontent-%COMP%]   .product-layout-horizontal[_ngcontent-%COMP%]   .next-page[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-primary);font-weight:600}ion-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{height:calc(100% - 110px);display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]{padding:48px 16px;margin:auto 16px 16px;box-shadow:0 4px 8px rgba(0,0,0,.04);text-align:center;border-radius:16px;background:#fff;display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin-top:8px}ion-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:8px;font-size:14px}ion-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:60px;width:80vw;margin:24px auto;--border-radius: 10px}"]});const Vo=[{path:"",component:On}];let Xo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[Qt.Bz.forChild(Vo),Qt.Bz]}),n})(),ti=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[R.ez,z.Pc,ie.mZ]}),n})(),ni=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[R.ez,z.Pc,ti,ie.mZ]}),n})(),ei=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[ni,R.ez,se.u5,z.Pc,Xo]}),n})()}}]);